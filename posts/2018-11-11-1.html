<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <meta name="yandex-verification" content="7ad767e88db9ca81" />
         
        <title>ChubaDuba - Home page</title>

        <!-- Stylesheets. -->
        <link rel="stylesheet" type="text/css" href="../style.css" />

        <!-- RSS. -->
        <link rel="alternate" type="application/rss+xml" title="ChubaDuba - блог" href="http://chubaduba.github.io/rss.xml" />

        <!-- Metadata. -->
        <meta name="keywords" content="ChubaDuba,Aleksey Chubakov,Алексей Чубаков,xmonad,Debian,xmobar,homepage,домашняя страница,zenburn" />
        <meta name="description" content="Персональная страница и блог Алексея Чубакова" />
    
                 
    </head>
    <body>
               
        <div id="navigation">
            <h5>Б&lambda;ог</h5>
            <a href="../" style="font-size: 20px; color: #94BFF2">Обо мне</a>
            <a href="../posts.html" style="font-size: 20px; color: #94BFF2">Архив</a>
            <a href="../contact.html" style="font-size: 20px; color: #94BFF2">Контакты</a>
            <a href="../photos.html" style="font-size: 20px; color: #94BFF2">Фотоб&lambda;ог</a>
            <a href="../donate.html" style="font-size: 20px; color: #709180">Donate</a>
            <a href="https://www.flickr.com/photos/chubaduba/albums" style="font-size: 20px; color: #EC93D3">Flickr</a>
        </div>

        <div id="content">
    <h1>Rtorrent color patch.</h1>
<div class="soft">
    Как в Debian 9 Stretch сделать rtorrent цветным.<br />
    Posted in: <a href="../tags/debian.html">debian</a>, <a href="../tags/soft.html">soft</a>.
</div>

<p>Патч, который будет описан ниже позволяет rtorrent’у отображать раздачи разными цветами, в зависимости от их статуса.</p>
<blockquote>
<p>Патч старый как г..но мамонта. Почему разработчики rtorrent’а не сделают это фишкой по умолчанию, остаётся загадкой.</p>
</blockquote>
<p>Непосредственно сам патч:</p>
<details>
<p><summary><code>rtorrent-0.9.6_color.patch</code></summary></p>
<hr />
<div class="sourceCode" id="cb1"><pre class="sourceCode php"><code class="sourceCode php"><span id="cb1-1"><a href="#cb1-1"></a>diff --git a/src/command_network.cc b/src/command_network.cc</span>
<span id="cb1-2"><a href="#cb1-2"></a>index c445c38..24ad5c0 <span class="dv">100644</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>--- a/src/command_network.cc</span>
<span id="cb1-4"><a href="#cb1-4"></a>+++ b/src/command_network.cc</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="er">@@</span> <span class="dv">-241</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">241</span><span class="ot">,</span><span class="dv">26</span> <span class="er">@@</span> initialize_command_network<span class="ot">()</span> {</span>
<span id="cb1-6"><a href="#cb1-6"></a>   <span class="kw">CMD2_ANY</span>         <span class="ot">(</span><span class="st">&quot;strings.connection_type&quot;</span><span class="ot">,</span> tr1::bind<span class="ot">(</span>&amp;torrent::option_list_strings<span class="ot">,</span> torrent::<span class="kw">OPTION_CONNECTION_TYPE</span><span class="ot">));</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>   <span class="kw">CMD2_ANY</span>         <span class="ot">(</span><span class="st">&quot;strings.encryption&quot;</span><span class="ot">,</span>      tr1::bind<span class="ot">(</span>&amp;torrent::option_list_strings<span class="ot">,</span> torrent::<span class="kw">OPTION_ENCRYPTION</span><span class="ot">));</span></span>
<span id="cb1-8"><a href="#cb1-8"></a> </span>
<span id="cb1-9"><a href="#cb1-9"></a>+  <span class="kw">CMD2_ANY</span>         <span class="ot">(</span><span class="st">&quot;colors.color_inactive_fg&quot;</span><span class="ot">,</span>       tr1::bind<span class="ot">(</span>&amp;ui::Root::get_color_inactive_fg<span class="ot">,</span>   control-&gt;ui<span class="ot">()));</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>+  <span class="kw">CMD2_ANY_VALUE_V</span> <span class="ot">(</span><span class="st">&quot;colors.color_inactive_fg.set&quot;</span><span class="ot">,</span>   tr1::bind<span class="ot">(</span>&amp;ui::Root::set_color_inactive_fg<span class="ot">,</span>   control-&gt;ui<span class="ot">(),</span> tr1::placeholders::_2<span class="ot">));</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>+  <span class="kw">CMD2_ANY</span>         <span class="ot">(</span><span class="st">&quot;colors.color_inactive_bg&quot;</span><span class="ot">,</span>       tr1::bind<span class="ot">(</span>&amp;ui::Root::get_color_inactive_bg<span class="ot">,</span>   control-&gt;ui<span class="ot">()));</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>+  <span class="kw">CMD2_ANY_VALUE_V</span> <span class="ot">(</span><span class="st">&quot;colors.color_inactive_bg.set&quot;</span><span class="ot">,</span>   tr1::bind<span class="ot">(</span>&amp;ui::Root::set_color_inactive_bg<span class="ot">,</span>   control-&gt;ui<span class="ot">(),</span> tr1::placeholders::_2<span class="ot">));</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>+  </span>
<span id="cb1-14"><a href="#cb1-14"></a>+  <span class="kw">CMD2_ANY</span>         <span class="ot">(</span><span class="st">&quot;colors.color_dead_fg&quot;</span><span class="ot">,</span>       tr1::bind<span class="ot">(</span>&amp;ui::Root::get_color_dead_fg<span class="ot">,</span>   control-&gt;ui<span class="ot">()));</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>+  <span class="kw">CMD2_ANY_VALUE_V</span> <span class="ot">(</span><span class="st">&quot;colors.color_dead_fg.set&quot;</span><span class="ot">,</span>   tr1::bind<span class="ot">(</span>&amp;ui::Root::set_color_dead_fg<span class="ot">,</span>   control-&gt;ui<span class="ot">(),</span> tr1::placeholders::_2<span class="ot">));</span></span>
<span id="cb1-16"><a href="#cb1-16"></a>+  <span class="kw">CMD2_ANY</span>         <span class="ot">(</span><span class="st">&quot;colors.color_dead_bg&quot;</span><span class="ot">,</span>       tr1::bind<span class="ot">(</span>&amp;ui::Root::get_color_dead_bg<span class="ot">,</span>   control-&gt;ui<span class="ot">()));</span></span>
<span id="cb1-17"><a href="#cb1-17"></a>+  <span class="kw">CMD2_ANY_VALUE_V</span> <span class="ot">(</span><span class="st">&quot;colors.color_dead_bg.set&quot;</span><span class="ot">,</span>   tr1::bind<span class="ot">(</span>&amp;ui::Root::set_color_dead_bg<span class="ot">,</span>   control-&gt;ui<span class="ot">(),</span> tr1::placeholders::_2<span class="ot">));</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>+</span>
<span id="cb1-19"><a href="#cb1-19"></a>+  <span class="kw">CMD2_ANY</span>         <span class="ot">(</span><span class="st">&quot;colors.color_active_fg&quot;</span><span class="ot">,</span>       tr1::bind<span class="ot">(</span>&amp;ui::Root::get_color_active_fg<span class="ot">,</span>   control-&gt;ui<span class="ot">()));</span></span>
<span id="cb1-20"><a href="#cb1-20"></a>+  <span class="kw">CMD2_ANY_VALUE_V</span> <span class="ot">(</span><span class="st">&quot;colors.color_active_fg.set&quot;</span><span class="ot">,</span>   tr1::bind<span class="ot">(</span>&amp;ui::Root::set_color_active_fg<span class="ot">,</span>   control-&gt;ui<span class="ot">(),</span> tr1::placeholders::_2<span class="ot">));</span></span>
<span id="cb1-21"><a href="#cb1-21"></a>+  <span class="kw">CMD2_ANY</span>         <span class="ot">(</span><span class="st">&quot;colors.color_active_bg&quot;</span><span class="ot">,</span>       tr1::bind<span class="ot">(</span>&amp;ui::Root::get_color_active_bg<span class="ot">,</span>   control-&gt;ui<span class="ot">()));</span></span>
<span id="cb1-22"><a href="#cb1-22"></a>+  <span class="kw">CMD2_ANY_VALUE_V</span> <span class="ot">(</span><span class="st">&quot;colors.color_active_bg.set&quot;</span><span class="ot">,</span>   tr1::bind<span class="ot">(</span>&amp;ui::Root::set_color_active_bg<span class="ot">,</span>   control-&gt;ui<span class="ot">(),</span> tr1::placeholders::_2<span class="ot">));</span></span>
<span id="cb1-23"><a href="#cb1-23"></a>+</span>
<span id="cb1-24"><a href="#cb1-24"></a>+  <span class="kw">CMD2_ANY</span>         <span class="ot">(</span><span class="st">&quot;colors.color_finished_fg&quot;</span><span class="ot">,</span>       tr1::bind<span class="ot">(</span>&amp;ui::Root::get_color_finished_fg<span class="ot">,</span>   control-&gt;ui<span class="ot">()));</span></span>
<span id="cb1-25"><a href="#cb1-25"></a>+  <span class="kw">CMD2_ANY_VALUE_V</span> <span class="ot">(</span><span class="st">&quot;colors.color_finished_fg.set&quot;</span><span class="ot">,</span>   tr1::bind<span class="ot">(</span>&amp;ui::Root::set_color_finished_fg<span class="ot">,</span>   control-&gt;ui<span class="ot">(),</span> tr1::placeholders::_2<span class="ot">));</span></span>
<span id="cb1-26"><a href="#cb1-26"></a>+  <span class="kw">CMD2_ANY</span>         <span class="ot">(</span><span class="st">&quot;colors.color_finished_bg&quot;</span><span class="ot">,</span>       tr1::bind<span class="ot">(</span>&amp;ui::Root::get_color_finished_bg<span class="ot">,</span>   control-&gt;ui<span class="ot">()));</span></span>
<span id="cb1-27"><a href="#cb1-27"></a>+  <span class="kw">CMD2_ANY_VALUE_V</span> <span class="ot">(</span><span class="st">&quot;colors.color_finished_bg.set&quot;</span><span class="ot">,</span>   tr1::bind<span class="ot">(</span>&amp;ui::Root::set_color_finished_bg<span class="ot">,</span>   control-&gt;ui<span class="ot">(),</span> tr1::placeholders::_2<span class="ot">));</span></span>
<span id="cb1-28"><a href="#cb1-28"></a>+</span>
<span id="cb1-29"><a href="#cb1-29"></a>   <span class="co">// CMD2_ANY_STRING  (&quot;encoding_list&quot;,    tr1::bind(&amp;apply_encoding_list, tr1::placeholders::_2));</span></span>
<span id="cb1-30"><a href="#cb1-30"></a>   <span class="kw">CMD2_ANY_STRING</span>  <span class="ot">(</span><span class="st">&quot;encoding.add&quot;</span><span class="ot">,</span> tr1::bind<span class="ot">(</span>&amp;apply_encoding_list<span class="ot">,</span> tr1::placeholders::_2<span class="ot">));</span></span>
<span id="cb1-31"><a href="#cb1-31"></a> </span>
<span id="cb1-32"><a href="#cb1-32"></a>diff --git a/src/display/canvas.cc b/src/display/canvas.cc</span>
<span id="cb1-33"><a href="#cb1-33"></a>index 31db4ad..<span class="fl">255e7</span>c3 <span class="dv">100644</span></span>
<span id="cb1-34"><a href="#cb1-34"></a>--- a/src/display/canvas.cc</span>
<span id="cb1-35"><a href="#cb1-35"></a>+++ b/src/display/canvas.cc</span>
<span id="cb1-36"><a href="#cb1-36"></a><span class="er">@@</span> <span class="dv">-99</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">99</span><span class="ot">,</span><span class="dv">12</span> <span class="er">@@</span> Canvas::initialize<span class="ot">()</span> {</span>
<span id="cb1-37"><a href="#cb1-37"></a>   m_isInitialized = <span class="kw">true</span><span class="ot">;</span></span>
<span id="cb1-38"><a href="#cb1-38"></a> </span>
<span id="cb1-39"><a href="#cb1-39"></a>   initscr<span class="ot">();</span></span>
<span id="cb1-40"><a href="#cb1-40"></a>+  start_color<span class="ot">();</span></span>
<span id="cb1-41"><a href="#cb1-41"></a>+  use_default_colors<span class="ot">();</span></span>
<span id="cb1-42"><a href="#cb1-42"></a>+  init_pair<span class="ot">(</span><span class="dv">4</span><span class="ot">,</span> <span class="dv">-1</span><span class="ot">,</span> <span class="dv">-1</span><span class="ot">);</span></span>
<span id="cb1-43"><a href="#cb1-43"></a>+  init_pair<span class="ot">(</span><span class="dv">3</span><span class="ot">,</span> <span class="dv">-1</span><span class="ot">,</span> <span class="dv">-1</span><span class="ot">);</span></span>
<span id="cb1-44"><a href="#cb1-44"></a>+  init_pair<span class="ot">(</span><span class="dv">2</span><span class="ot">,</span> <span class="dv">-1</span><span class="ot">,</span> <span class="dv">-1</span><span class="ot">);</span></span>
<span id="cb1-45"><a href="#cb1-45"></a>+  init_pair<span class="ot">(</span><span class="dv">1</span><span class="ot">,</span> <span class="dv">-1</span><span class="ot">,</span> <span class="dv">-1</span><span class="ot">);</span></span>
<span id="cb1-46"><a href="#cb1-46"></a>   raw<span class="ot">();</span></span>
<span id="cb1-47"><a href="#cb1-47"></a>   noecho<span class="ot">();</span></span>
<span id="cb1-48"><a href="#cb1-48"></a>   nodelay<span class="ot">(</span>stdscr<span class="ot">,</span> <span class="kw">TRUE</span><span class="ot">);</span></span>
<span id="cb1-49"><a href="#cb1-49"></a>diff --git a/src/display/window_download_list.cc b/src/display/window_download_list.cc</span>
<span id="cb1-50"><a href="#cb1-50"></a>index ead4ddd..ffd79c9 <span class="dv">100644</span></span>
<span id="cb1-51"><a href="#cb1-51"></a>--- a/src/display/window_download_list.cc</span>
<span id="cb1-52"><a href="#cb1-52"></a>+++ b/src/display/window_download_list.cc</span>
<span id="cb1-53"><a href="#cb1-53"></a><span class="er">@@</span> <span class="dv">-37</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">37</span><span class="ot">,</span><span class="dv">7</span> <span class="er">@@</span></span>
<span id="cb1-54"><a href="#cb1-54"></a> <span class="co">#include &quot;config.h&quot;</span></span>
<span id="cb1-55"><a href="#cb1-55"></a> </span>
<span id="cb1-56"><a href="#cb1-56"></a> <span class="co">#include &lt;rak/algorithm.h&gt;</span></span>
<span id="cb1-57"><a href="#cb1-57"></a>+<span class="co">#include &lt;torrent/rate.h&gt;</span></span>
<span id="cb1-58"><a href="#cb1-58"></a> </span>
<span id="cb1-59"><a href="#cb1-59"></a> <span class="co">#include &quot;core/download.h&quot;</span></span>
<span id="cb1-60"><a href="#cb1-60"></a> <span class="co">#include &quot;core/view.h&quot;</span></span>
<span id="cb1-61"><a href="#cb1-61"></a><span class="er">@@</span> <span class="dv">-104</span><span class="ot">,</span><span class="dv">9</span> +<span class="dv">105</span><span class="ot">,</span><span class="dv">41</span> <span class="er">@@</span> WindowDownloadList::redraw<span class="ot">()</span> {</span>
<span id="cb1-62"><a href="#cb1-62"></a>     char buffer<span class="ot">[</span>m_canvas-&gt;width<span class="ot">()</span> + <span class="dv">1</span><span class="ot">];</span></span>
<span id="cb1-63"><a href="#cb1-63"></a>     char* last = buffer + m_canvas-&gt;width<span class="ot">()</span> - <span class="dv">2</span> + <span class="dv">1</span><span class="ot">;</span></span>
<span id="cb1-64"><a href="#cb1-64"></a> </span>
<span id="cb1-65"><a href="#cb1-65"></a>+    <span class="co">/*</span></span>
<span id="cb1-66"><a href="#cb1-66"></a><span class="co">+    There are four states where colors are applied:</span></span>
<span id="cb1-67"><a href="#cb1-67"></a><span class="co">+    1 inactive  # If inactive, e.g. user stopped down/upload</span></span>
<span id="cb1-68"><a href="#cb1-68"></a><span class="co">+    2 dead      # If active but no down/upload</span></span>
<span id="cb1-69"><a href="#cb1-69"></a><span class="co">+    3 active    # If active and download</span></span>
<span id="cb1-70"><a href="#cb1-70"></a><span class="co">+    4 finished  # If finished</span></span>
<span id="cb1-71"><a href="#cb1-71"></a><span class="co">+    */</span></span>
<span id="cb1-72"><a href="#cb1-72"></a>+</span>
<span id="cb1-73"><a href="#cb1-73"></a>     print_download_title<span class="ot">(</span>buffer<span class="ot">,</span> last<span class="ot">,</span> *<span class="fu">range</span>.first<span class="ot">);</span></span>
<span id="cb1-74"><a href="#cb1-74"></a>-    m_canvas-&gt;<span class="kw">print</span><span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span>++<span class="ot">,</span> <span class="st">&quot;%c %s&quot;</span><span class="ot">,</span> <span class="fu">range</span>.first == m_view-&gt;focus<span class="ot">()</span> <span class="ot">?</span> <span class="st">'*'</span> <span class="ot">:</span> <span class="st">' '</span><span class="ot">,</span> buffer<span class="ot">);</span></span>
<span id="cb1-75"><a href="#cb1-75"></a>-    </span>
<span id="cb1-76"><a href="#cb1-76"></a>+    m_canvas-&gt;<span class="kw">print</span><span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span><span class="ot">,</span> <span class="st">&quot;%c %s&quot;</span><span class="ot">,</span> <span class="fu">range</span>.first == m_view-&gt;focus<span class="ot">()</span> <span class="ot">?</span> <span class="st">'*'</span> <span class="ot">:</span> <span class="st">' '</span><span class="ot">,</span> buffer<span class="ot">);</span></span>
<span id="cb1-77"><a href="#cb1-77"></a>+    <span class="kw">if</span><span class="ot">(</span> <span class="ot">(</span>*<span class="fu">range</span>.first<span class="ot">)</span>-&gt;is_done<span class="ot">()</span> <span class="ot">)</span> {</span>
<span id="cb1-78"><a href="#cb1-78"></a>+      <span class="kw">if</span><span class="ot">(</span> <span class="ot">(</span>*<span class="fu">range</span>.first<span class="ot">)</span>-&gt;download<span class="ot">()</span>-&gt;info<span class="ot">()</span>-&gt;up_rate<span class="ot">()</span>-&gt;rate<span class="ot">()</span> != <span class="dv">0</span> <span class="ot">)</span> {</span>
<span id="cb1-79"><a href="#cb1-79"></a>+      m_canvas-&gt;set_attr<span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span><span class="ot">,</span> m_canvas-&gt;width<span class="ot">()</span>-<span class="dv">1</span><span class="ot">,</span> <span class="kw">A_BOLD</span><span class="ot">,</span> <span class="dv">4</span><span class="ot">);</span>       <span class="co">// Finished and uploading</span></span>
<span id="cb1-80"><a href="#cb1-80"></a>+      } <span class="kw">else</span> {</span>
<span id="cb1-81"><a href="#cb1-81"></a>+      m_canvas-&gt;set_attr<span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span><span class="ot">,</span> m_canvas-&gt;width<span class="ot">()</span>-<span class="dv">1</span><span class="ot">,</span> <span class="kw">A_NORMAL</span><span class="ot">,</span> <span class="dv">4</span><span class="ot">);</span>     <span class="co">// Finished</span></span>
<span id="cb1-82"><a href="#cb1-82"></a>+      }</span>
<span id="cb1-83"><a href="#cb1-83"></a>+    } <span class="kw">else</span> <span class="kw">if</span><span class="ot">(</span> <span class="ot">(</span>*<span class="fu">range</span>.first<span class="ot">)</span>-&gt;is_active<span class="ot">()</span> <span class="ot">)</span> {</span>
<span id="cb1-84"><a href="#cb1-84"></a>+      <span class="kw">if</span><span class="ot">(</span> <span class="ot">(</span>*<span class="fu">range</span>.first<span class="ot">)</span>-&gt;download<span class="ot">()</span>-&gt;info<span class="ot">()</span>-&gt;down_rate<span class="ot">()</span>-&gt;rate<span class="ot">()</span> != <span class="dv">0</span> <span class="ot">)</span> {</span>
<span id="cb1-85"><a href="#cb1-85"></a>+        <span class="kw">if</span><span class="ot">(</span> <span class="ot">(</span>*<span class="fu">range</span>.first<span class="ot">)</span>-&gt;download<span class="ot">()</span>-&gt;info<span class="ot">()</span>-&gt;up_rate<span class="ot">()</span>-&gt;rate<span class="ot">()</span> != <span class="dv">0</span> <span class="ot">)</span> {</span>
<span id="cb1-86"><a href="#cb1-86"></a>+          m_canvas-&gt;set_attr<span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span><span class="ot">,</span> m_canvas-&gt;width<span class="ot">()</span>-<span class="dv">1</span><span class="ot">,</span> <span class="kw">A_BOLD</span><span class="ot">,</span> <span class="dv">3</span><span class="ot">);</span>     <span class="co">// Active and uploading</span></span>
<span id="cb1-87"><a href="#cb1-87"></a>+        } <span class="kw">else</span> {</span>
<span id="cb1-88"><a href="#cb1-88"></a>+          m_canvas-&gt;set_attr<span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span><span class="ot">,</span> m_canvas-&gt;width<span class="ot">()</span>-<span class="dv">1</span><span class="ot">,</span> <span class="kw">A_NORMAL</span><span class="ot">,</span> <span class="dv">3</span><span class="ot">);</span>   <span class="co">// Active</span></span>
<span id="cb1-89"><a href="#cb1-89"></a>+        }</span>
<span id="cb1-90"><a href="#cb1-90"></a>+      } <span class="kw">else</span> {</span>
<span id="cb1-91"><a href="#cb1-91"></a>+        <span class="kw">if</span><span class="ot">(</span> <span class="ot">(</span>*<span class="fu">range</span>.first<span class="ot">)</span>-&gt;download<span class="ot">()</span>-&gt;info<span class="ot">()</span>-&gt;up_rate<span class="ot">()</span>-&gt;rate<span class="ot">()</span> != <span class="dv">0</span> <span class="ot">)</span> {</span>
<span id="cb1-92"><a href="#cb1-92"></a>+          m_canvas-&gt;set_attr<span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span><span class="ot">,</span> m_canvas-&gt;width<span class="ot">()</span>-<span class="dv">1</span><span class="ot">,</span> <span class="kw">A_BOLD</span><span class="ot">,</span> <span class="dv">2</span><span class="ot">);</span>     <span class="co">// Dead but still uploading</span></span>
<span id="cb1-93"><a href="#cb1-93"></a>+        } <span class="kw">else</span> {</span>
<span id="cb1-94"><a href="#cb1-94"></a>+          m_canvas-&gt;set_attr<span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span><span class="ot">,</span> m_canvas-&gt;width<span class="ot">()</span>-<span class="dv">1</span><span class="ot">,</span> <span class="kw">A_NORMAL</span><span class="ot">,</span> <span class="dv">2</span><span class="ot">);</span>   <span class="co">// Dead</span></span>
<span id="cb1-95"><a href="#cb1-95"></a>+        }</span>
<span id="cb1-96"><a href="#cb1-96"></a>+      }</span>
<span id="cb1-97"><a href="#cb1-97"></a>+    } <span class="kw">else</span> {</span>
<span id="cb1-98"><a href="#cb1-98"></a>+      m_canvas-&gt;set_attr<span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span><span class="ot">,</span> m_canvas-&gt;width<span class="ot">()</span>-<span class="dv">1</span><span class="ot">,</span> <span class="kw">A_NORMAL</span><span class="ot">,</span> <span class="dv">1</span><span class="ot">);</span>     <span class="co">// Inactive</span></span>
<span id="cb1-99"><a href="#cb1-99"></a>+    }</span>
<span id="cb1-100"><a href="#cb1-100"></a>+    <span class="fu">pos</span>++<span class="ot">;</span></span>
<span id="cb1-101"><a href="#cb1-101"></a>+</span>
<span id="cb1-102"><a href="#cb1-102"></a>     print_download_info<span class="ot">(</span>buffer<span class="ot">,</span> last<span class="ot">,</span> *<span class="fu">range</span>.first<span class="ot">);</span></span>
<span id="cb1-103"><a href="#cb1-103"></a>     m_canvas-&gt;<span class="kw">print</span><span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span>++<span class="ot">,</span> <span class="st">&quot;%c %s&quot;</span><span class="ot">,</span> <span class="fu">range</span>.first == m_view-&gt;focus<span class="ot">()</span> <span class="ot">?</span> <span class="st">'*'</span> <span class="ot">:</span> <span class="st">' '</span><span class="ot">,</span> buffer<span class="ot">);</span></span>
<span id="cb1-104"><a href="#cb1-104"></a> </span>
<span id="cb1-105"><a href="#cb1-105"></a><span class="er">@@</span> <span class="dv">-114</span><span class="ot">,</span><span class="dv">7</span> +<span class="dv">147</span><span class="ot">,</span><span class="dv">83</span> <span class="er">@@</span> WindowDownloadList::redraw<span class="ot">()</span> {</span>
<span id="cb1-106"><a href="#cb1-106"></a>     m_canvas-&gt;<span class="kw">print</span><span class="ot">(</span><span class="dv">0</span><span class="ot">,</span> <span class="fu">pos</span>++<span class="ot">,</span> <span class="st">&quot;%c %s&quot;</span><span class="ot">,</span> <span class="fu">range</span>.first == m_view-&gt;focus<span class="ot">()</span> <span class="ot">?</span> <span class="st">'*'</span> <span class="ot">:</span> <span class="st">' '</span><span class="ot">,</span> buffer<span class="ot">);</span></span>
<span id="cb1-107"><a href="#cb1-107"></a> </span>
<span id="cb1-108"><a href="#cb1-108"></a>     ++<span class="fu">range</span>.first<span class="ot">;</span></span>
<span id="cb1-109"><a href="#cb1-109"></a>-  }    </span>
<span id="cb1-110"><a href="#cb1-110"></a>+  }</span>
<span id="cb1-111"><a href="#cb1-111"></a>+}</span>
<span id="cb1-112"><a href="#cb1-112"></a>+</span>
<span id="cb1-113"><a href="#cb1-113"></a>+<span class="co">// Inactive</span></span>
<span id="cb1-114"><a href="#cb1-114"></a>+<span class="kw">void</span></span>
<span id="cb1-115"><a href="#cb1-115"></a>+WindowDownloadList::set_color_inactive_fg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-116"><a href="#cb1-116"></a>+  short fg<span class="ot">,</span> bg<span class="ot">;</span></span>
<span id="cb1-117"><a href="#cb1-117"></a>+  pair_content<span class="ot">(</span><span class="dv">1</span><span class="ot">,</span> &amp;fg<span class="ot">,</span> &amp;bg<span class="ot">);</span></span>
<span id="cb1-118"><a href="#cb1-118"></a>+  <span class="kw">if</span><span class="ot">(</span> color &lt; <span class="dv">0</span> <span class="ot">)</span> color = <span class="dv">-1</span><span class="ot">;</span></span>
<span id="cb1-119"><a href="#cb1-119"></a>+  color = color % <span class="dv">8</span><span class="ot">;</span></span>
<span id="cb1-120"><a href="#cb1-120"></a>+  init_pair<span class="ot">(</span><span class="dv">1</span><span class="ot">,</span> <span class="ot">(</span>short<span class="ot">)</span>color<span class="ot">,</span> bg<span class="ot">);</span></span>
<span id="cb1-121"><a href="#cb1-121"></a>+}</span>
<span id="cb1-122"><a href="#cb1-122"></a>+</span>
<span id="cb1-123"><a href="#cb1-123"></a>+<span class="kw">void</span></span>
<span id="cb1-124"><a href="#cb1-124"></a>+WindowDownloadList::set_color_inactive_bg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-125"><a href="#cb1-125"></a>+  short fg<span class="ot">,</span> bg<span class="ot">;</span></span>
<span id="cb1-126"><a href="#cb1-126"></a>+  pair_content<span class="ot">(</span><span class="dv">1</span><span class="ot">,</span> &amp;fg<span class="ot">,</span> &amp;bg<span class="ot">);</span></span>
<span id="cb1-127"><a href="#cb1-127"></a>+  <span class="kw">if</span><span class="ot">(</span> color &lt; <span class="dv">0</span> <span class="ot">)</span> color = <span class="dv">-1</span><span class="ot">;</span></span>
<span id="cb1-128"><a href="#cb1-128"></a>+  color = color % <span class="dv">8</span><span class="ot">;</span></span>
<span id="cb1-129"><a href="#cb1-129"></a>+  init_pair<span class="ot">(</span><span class="dv">1</span><span class="ot">,</span> fg<span class="ot">,</span> <span class="ot">(</span>short<span class="ot">)</span>color<span class="ot">);</span></span>
<span id="cb1-130"><a href="#cb1-130"></a>+}</span>
<span id="cb1-131"><a href="#cb1-131"></a>+</span>
<span id="cb1-132"><a href="#cb1-132"></a>+<span class="co">// Dead</span></span>
<span id="cb1-133"><a href="#cb1-133"></a>+<span class="kw">void</span></span>
<span id="cb1-134"><a href="#cb1-134"></a>+WindowDownloadList::set_color_dead_fg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-135"><a href="#cb1-135"></a>+  short fg<span class="ot">,</span> bg<span class="ot">;</span></span>
<span id="cb1-136"><a href="#cb1-136"></a>+  pair_content<span class="ot">(</span><span class="dv">2</span><span class="ot">,</span> &amp;fg<span class="ot">,</span> &amp;bg<span class="ot">);</span></span>
<span id="cb1-137"><a href="#cb1-137"></a>+  <span class="kw">if</span><span class="ot">(</span> color &lt; <span class="dv">0</span> <span class="ot">)</span> color = <span class="dv">-1</span><span class="ot">;</span></span>
<span id="cb1-138"><a href="#cb1-138"></a>+  color = color % <span class="dv">8</span><span class="ot">;</span></span>
<span id="cb1-139"><a href="#cb1-139"></a>+  init_pair<span class="ot">(</span><span class="dv">2</span><span class="ot">,</span> <span class="ot">(</span>short<span class="ot">)</span>color<span class="ot">,</span> bg<span class="ot">);</span></span>
<span id="cb1-140"><a href="#cb1-140"></a>+}</span>
<span id="cb1-141"><a href="#cb1-141"></a>+</span>
<span id="cb1-142"><a href="#cb1-142"></a>+<span class="kw">void</span></span>
<span id="cb1-143"><a href="#cb1-143"></a>+WindowDownloadList::set_color_dead_bg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-144"><a href="#cb1-144"></a>+  short fg<span class="ot">,</span> bg<span class="ot">;</span></span>
<span id="cb1-145"><a href="#cb1-145"></a>+  pair_content<span class="ot">(</span><span class="dv">2</span><span class="ot">,</span> &amp;fg<span class="ot">,</span> &amp;bg<span class="ot">);</span></span>
<span id="cb1-146"><a href="#cb1-146"></a>+  <span class="kw">if</span><span class="ot">(</span> color &lt; <span class="dv">0</span> <span class="ot">)</span> color = <span class="dv">-1</span><span class="ot">;</span></span>
<span id="cb1-147"><a href="#cb1-147"></a>+  color = color % <span class="dv">8</span><span class="ot">;</span></span>
<span id="cb1-148"><a href="#cb1-148"></a>+  init_pair<span class="ot">(</span><span class="dv">2</span><span class="ot">,</span> fg<span class="ot">,</span> <span class="ot">(</span>short<span class="ot">)</span>color<span class="ot">);</span></span>
<span id="cb1-149"><a href="#cb1-149"></a>+}</span>
<span id="cb1-150"><a href="#cb1-150"></a>+</span>
<span id="cb1-151"><a href="#cb1-151"></a>+<span class="co">// Active</span></span>
<span id="cb1-152"><a href="#cb1-152"></a>+<span class="kw">void</span></span>
<span id="cb1-153"><a href="#cb1-153"></a>+WindowDownloadList::set_color_active_fg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-154"><a href="#cb1-154"></a>+  short fg<span class="ot">,</span> bg<span class="ot">;</span></span>
<span id="cb1-155"><a href="#cb1-155"></a>+  pair_content<span class="ot">(</span><span class="dv">3</span><span class="ot">,</span> &amp;fg<span class="ot">,</span> &amp;bg<span class="ot">);</span></span>
<span id="cb1-156"><a href="#cb1-156"></a>+  <span class="kw">if</span><span class="ot">(</span> color &lt; <span class="dv">0</span> <span class="ot">)</span> color = <span class="dv">-1</span><span class="ot">;</span></span>
<span id="cb1-157"><a href="#cb1-157"></a>+  color = color % <span class="dv">8</span><span class="ot">;</span></span>
<span id="cb1-158"><a href="#cb1-158"></a>+  init_pair<span class="ot">(</span><span class="dv">3</span><span class="ot">,</span> <span class="ot">(</span>short<span class="ot">)</span>color<span class="ot">,</span> bg<span class="ot">);</span></span>
<span id="cb1-159"><a href="#cb1-159"></a>+}</span>
<span id="cb1-160"><a href="#cb1-160"></a>+</span>
<span id="cb1-161"><a href="#cb1-161"></a>+<span class="kw">void</span></span>
<span id="cb1-162"><a href="#cb1-162"></a>+WindowDownloadList::set_color_active_bg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-163"><a href="#cb1-163"></a>+  short fg<span class="ot">,</span> bg<span class="ot">;</span></span>
<span id="cb1-164"><a href="#cb1-164"></a>+  pair_content<span class="ot">(</span><span class="dv">3</span><span class="ot">,</span> &amp;fg<span class="ot">,</span> &amp;bg<span class="ot">);</span></span>
<span id="cb1-165"><a href="#cb1-165"></a>+  <span class="kw">if</span><span class="ot">(</span> color &lt; <span class="dv">0</span> <span class="ot">)</span> color = <span class="dv">-1</span><span class="ot">;</span></span>
<span id="cb1-166"><a href="#cb1-166"></a>+  color = color % <span class="dv">8</span><span class="ot">;</span></span>
<span id="cb1-167"><a href="#cb1-167"></a>+  init_pair<span class="ot">(</span><span class="dv">3</span><span class="ot">,</span> fg<span class="ot">,</span> <span class="ot">(</span>short<span class="ot">)</span>color<span class="ot">);</span></span>
<span id="cb1-168"><a href="#cb1-168"></a>+}</span>
<span id="cb1-169"><a href="#cb1-169"></a>+</span>
<span id="cb1-170"><a href="#cb1-170"></a>+<span class="co">// Finished</span></span>
<span id="cb1-171"><a href="#cb1-171"></a>+<span class="kw">void</span></span>
<span id="cb1-172"><a href="#cb1-172"></a>+WindowDownloadList::set_color_finished_fg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-173"><a href="#cb1-173"></a>+  short fg<span class="ot">,</span> bg<span class="ot">;</span></span>
<span id="cb1-174"><a href="#cb1-174"></a>+  pair_content<span class="ot">(</span><span class="dv">4</span><span class="ot">,</span> &amp;fg<span class="ot">,</span> &amp;bg<span class="ot">);</span></span>
<span id="cb1-175"><a href="#cb1-175"></a>+  <span class="kw">if</span><span class="ot">(</span> color &lt; <span class="dv">0</span> <span class="ot">)</span> color = <span class="dv">-1</span><span class="ot">;</span></span>
<span id="cb1-176"><a href="#cb1-176"></a>+  color = color % <span class="dv">8</span><span class="ot">;</span></span>
<span id="cb1-177"><a href="#cb1-177"></a>+  init_pair<span class="ot">(</span><span class="dv">4</span><span class="ot">,</span> <span class="ot">(</span>short<span class="ot">)</span>color<span class="ot">,</span> bg<span class="ot">);</span></span>
<span id="cb1-178"><a href="#cb1-178"></a>+}</span>
<span id="cb1-179"><a href="#cb1-179"></a>+</span>
<span id="cb1-180"><a href="#cb1-180"></a>+<span class="kw">void</span></span>
<span id="cb1-181"><a href="#cb1-181"></a>+WindowDownloadList::set_color_finished_bg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-182"><a href="#cb1-182"></a>+  short fg<span class="ot">,</span> bg<span class="ot">;</span></span>
<span id="cb1-183"><a href="#cb1-183"></a>+  pair_content<span class="ot">(</span><span class="dv">4</span><span class="ot">,</span> &amp;fg<span class="ot">,</span> &amp;bg<span class="ot">);</span></span>
<span id="cb1-184"><a href="#cb1-184"></a>+  <span class="kw">if</span><span class="ot">(</span> color &lt; <span class="dv">0</span> <span class="ot">)</span> color = <span class="dv">-1</span><span class="ot">;</span></span>
<span id="cb1-185"><a href="#cb1-185"></a>+  color = color % <span class="dv">8</span><span class="ot">;</span></span>
<span id="cb1-186"><a href="#cb1-186"></a>+  init_pair<span class="ot">(</span><span class="dv">4</span><span class="ot">,</span> fg<span class="ot">,</span> <span class="ot">(</span>short<span class="ot">)</span>color<span class="ot">);</span></span>
<span id="cb1-187"><a href="#cb1-187"></a> }</span>
<span id="cb1-188"><a href="#cb1-188"></a> </span>
<span id="cb1-189"><a href="#cb1-189"></a> }</span>
<span id="cb1-190"><a href="#cb1-190"></a>diff --git a/src/display/window_download_list.h b/src/display/window_download_list.h</span>
<span id="cb1-191"><a href="#cb1-191"></a>index <span class="fl">8e15</span>cac..4551a47 <span class="dv">100644</span></span>
<span id="cb1-192"><a href="#cb1-192"></a>--- a/src/display/window_download_list.h</span>
<span id="cb1-193"><a href="#cb1-193"></a>+++ b/src/display/window_download_list.h</span>
<span id="cb1-194"><a href="#cb1-194"></a><span class="er">@@</span> <span class="dv">-55</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">55</span><span class="ot">,</span><span class="dv">15</span> <span class="er">@@</span> <span class="kw">public</span>:</span>
<span id="cb1-195"><a href="#cb1-195"></a> </span>
<span id="cb1-196"><a href="#cb1-196"></a>   <span class="kw">void</span>                set_view<span class="ot">(</span>core::View* l<span class="ot">);</span></span>
<span id="cb1-197"><a href="#cb1-197"></a> </span>
<span id="cb1-198"><a href="#cb1-198"></a>+  <span class="kw">void</span>                set_color_inactive_fg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-199"><a href="#cb1-199"></a>+  <span class="kw">void</span>                set_color_inactive_bg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-200"><a href="#cb1-200"></a>+  <span class="kw">void</span>                set_color_dead_fg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-201"><a href="#cb1-201"></a>+  <span class="kw">void</span>                set_color_dead_bg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-202"><a href="#cb1-202"></a>+  <span class="kw">void</span>                set_color_active_fg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-203"><a href="#cb1-203"></a>+  <span class="kw">void</span>                set_color_active_bg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-204"><a href="#cb1-204"></a>+  <span class="kw">void</span>                set_color_finished_fg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-205"><a href="#cb1-205"></a>+  <span class="kw">void</span>                set_color_finished_bg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-206"><a href="#cb1-206"></a>+</span>
<span id="cb1-207"><a href="#cb1-207"></a> <span class="kw">private</span>:</span>
<span id="cb1-208"><a href="#cb1-208"></a>   core::View*         m_view<span class="ot">;</span></span>
<span id="cb1-209"><a href="#cb1-209"></a> </span>
<span id="cb1-210"><a href="#cb1-210"></a>diff --git a/src/main.cc b/src/main.cc</span>
<span id="cb1-211"><a href="#cb1-211"></a>index <span class="fl">5e826</span>bb..44faa21 <span class="dv">100644</span></span>
<span id="cb1-212"><a href="#cb1-212"></a>--- a/src/main.cc</span>
<span id="cb1-213"><a href="#cb1-213"></a>+++ b/src/main.cc</span>
<span id="cb1-214"><a href="#cb1-214"></a><span class="er">@@</span> <span class="dv">-388</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">388</span><span class="ot">,</span><span class="dv">15</span> <span class="er">@@</span> main<span class="ot">(</span><span class="kw">int</span> argc<span class="ot">,</span> char** argv<span class="ot">)</span> {</span>
<span id="cb1-215"><a href="#cb1-215"></a>     <span class="kw">CMD2_REDIRECT</span>        <span class="ot">(</span><span class="st">&quot;ip&quot;</span><span class="ot">,</span>         <span class="st">&quot;network.local_address.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-216"><a href="#cb1-216"></a>     <span class="kw">CMD2_REDIRECT</span>        <span class="ot">(</span><span class="st">&quot;port_range&quot;</span><span class="ot">,</span> <span class="st">&quot;network.port_range.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-217"><a href="#cb1-217"></a> </span>
<span id="cb1-218"><a href="#cb1-218"></a>+    <span class="kw">CMD2_REDIRECT</span>       <span class="ot">(</span><span class="st">&quot;color_inactive_fg&quot;</span><span class="ot">,</span> <span class="st">&quot;colors.color_inactive_fg.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-219"><a href="#cb1-219"></a>+    <span class="kw">CMD2_REDIRECT</span>       <span class="ot">(</span><span class="st">&quot;color_inactive_bg&quot;</span><span class="ot">,</span> <span class="st">&quot;colors.color_inactive_bg.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-220"><a href="#cb1-220"></a>+    <span class="kw">CMD2_REDIRECT</span>       <span class="ot">(</span><span class="st">&quot;color_dead_fg&quot;</span><span class="ot">,</span>     <span class="st">&quot;colors.color_dead_fg.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-221"><a href="#cb1-221"></a>+    <span class="kw">CMD2_REDIRECT</span>       <span class="ot">(</span><span class="st">&quot;color_dead_bg&quot;</span><span class="ot">,</span>     <span class="st">&quot;colors.color_dead_bg.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-222"><a href="#cb1-222"></a>+    <span class="kw">CMD2_REDIRECT</span>       <span class="ot">(</span><span class="st">&quot;color_active_fg&quot;</span><span class="ot">,</span>   <span class="st">&quot;colors.color_active_fg.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-223"><a href="#cb1-223"></a>+    <span class="kw">CMD2_REDIRECT</span>       <span class="ot">(</span><span class="st">&quot;color_active_bg&quot;</span><span class="ot">,</span>   <span class="st">&quot;colors.color_active_bg.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-224"><a href="#cb1-224"></a>+    <span class="kw">CMD2_REDIRECT</span>       <span class="ot">(</span><span class="st">&quot;color_finished_fg&quot;</span><span class="ot">,</span> <span class="st">&quot;colors.color_finished_fg.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-225"><a href="#cb1-225"></a>+    <span class="kw">CMD2_REDIRECT</span>       <span class="ot">(</span><span class="st">&quot;color_finished_bg&quot;</span><span class="ot">,</span> <span class="st">&quot;colors.color_finished_bg.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-226"><a href="#cb1-226"></a>+</span>
<span id="cb1-227"><a href="#cb1-227"></a>     <span class="kw">CMD2_REDIRECT_GENERIC</span><span class="ot">(</span><span class="st">&quot;dht&quot;</span><span class="ot">,</span>      <span class="st">&quot;dht.mode.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-228"><a href="#cb1-228"></a>     <span class="kw">CMD2_REDIRECT_GENERIC</span><span class="ot">(</span><span class="st">&quot;dht_port&quot;</span><span class="ot">,</span> <span class="st">&quot;dht.port.set&quot;</span><span class="ot">);</span></span>
<span id="cb1-229"><a href="#cb1-229"></a> </span>
<span id="cb1-230"><a href="#cb1-230"></a>diff --git a/src/ui/download_list.cc b/src/ui/download_list.cc</span>
<span id="cb1-231"><a href="#cb1-231"></a>index e3abc9a..7dc7469 <span class="dv">100644</span></span>
<span id="cb1-232"><a href="#cb1-232"></a>--- a/src/ui/download_list.cc</span>
<span id="cb1-233"><a href="#cb1-233"></a>+++ b/src/ui/download_list.cc</span>
<span id="cb1-234"><a href="#cb1-234"></a><span class="er">@@</span> <span class="dv">-136</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">136</span><span class="ot">,</span><span class="dv">11</span> <span class="er">@@</span> DownloadList::unfocus_download<span class="ot">(</span>core::Download* d<span class="ot">)</span> {</span>
<span id="cb1-235"><a href="#cb1-235"></a>   current_view<span class="ot">()</span>-&gt;next_focus<span class="ot">();</span></span>
<span id="cb1-236"><a href="#cb1-236"></a> }</span>
<span id="cb1-237"><a href="#cb1-237"></a> </span>
<span id="cb1-238"><a href="#cb1-238"></a>+display::WindowDownloadList*</span>
<span id="cb1-239"><a href="#cb1-239"></a>+DownloadList::current_window_list<span class="ot">()</span> {</span>
<span id="cb1-240"><a href="#cb1-240"></a>+  <span class="kw">return</span> dynamic_cast&lt;ElementDownloadList*&gt;<span class="ot">(</span>m_uiArray<span class="ot">[</span><span class="kw">DISPLAY_DOWNLOAD_LIST</span><span class="ot">])</span>-&gt;window<span class="ot">();</span></span>
<span id="cb1-241"><a href="#cb1-241"></a>+}</span>
<span id="cb1-242"><a href="#cb1-242"></a>+</span>
<span id="cb1-243"><a href="#cb1-243"></a> <span class="kw">void</span></span>
<span id="cb1-244"><a href="#cb1-244"></a> DownloadList::activate_display<span class="ot">(</span>Display displayType<span class="ot">)</span> {</span>
<span id="cb1-245"><a href="#cb1-245"></a>   <span class="kw">if</span> <span class="ot">(</span>!is_active<span class="ot">())</span></span>
<span id="cb1-246"><a href="#cb1-246"></a>diff --git a/src/ui/download_list.h b/src/ui/download_list.h</span>
<span id="cb1-247"><a href="#cb1-247"></a>index 3712e36..7810f65 <span class="dv">100644</span></span>
<span id="cb1-248"><a href="#cb1-248"></a>--- a/src/ui/download_list.h</span>
<span id="cb1-249"><a href="#cb1-249"></a>+++ b/src/ui/download_list.h</span>
<span id="cb1-250"><a href="#cb1-250"></a><span class="er">@@</span> <span class="dv">-98</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">98</span><span class="ot">,</span><span class="dv">7</span> <span class="er">@@</span> <span class="kw">public</span>:</span>
<span id="cb1-251"><a href="#cb1-251"></a>   <span class="kw">void</span>                activate_display<span class="ot">(</span>Display d<span class="ot">);</span></span>
<span id="cb1-252"><a href="#cb1-252"></a> </span>
<span id="cb1-253"><a href="#cb1-253"></a>   core::View*         current_view<span class="ot">();</span></span>
<span id="cb1-254"><a href="#cb1-254"></a>+  display::WindowDownloadList* current_window_list<span class="ot">();</span></span>
<span id="cb1-255"><a href="#cb1-255"></a>   <span class="kw">void</span>                set_current_view<span class="ot">(</span><span class="kw">const</span> std::<span class="kw">string</span>&amp; name<span class="ot">);</span></span>
<span id="cb1-256"><a href="#cb1-256"></a> </span>
<span id="cb1-257"><a href="#cb1-257"></a>   <span class="kw">void</span>                slot_open_uri<span class="ot">(</span>slot_string s<span class="ot">)</span> { m_slot_open_uri = s<span class="ot">;</span> }</span>
<span id="cb1-258"><a href="#cb1-258"></a>diff --git a/src/ui/element_download_list.h b/src/ui/element_download_list.h</span>
<span id="cb1-259"><a href="#cb1-259"></a>index 20185b5..00ef880 <span class="dv">100644</span></span>
<span id="cb1-260"><a href="#cb1-260"></a>--- a/src/ui/element_download_list.h</span>
<span id="cb1-261"><a href="#cb1-261"></a>+++ b/src/ui/element_download_list.h</span>
<span id="cb1-262"><a href="#cb1-262"></a><span class="er">@@</span> <span class="dv">-60</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">60</span><span class="ot">,</span><span class="dv">7</span> <span class="er">@@</span> <span class="kw">public</span>:</span>
<span id="cb1-263"><a href="#cb1-263"></a>   <span class="kw">void</span>                disable<span class="ot">();</span></span>
<span id="cb1-264"><a href="#cb1-264"></a> </span>
<span id="cb1-265"><a href="#cb1-265"></a>   core::View*         view<span class="ot">()</span> { <span class="kw">return</span> m_view<span class="ot">;</span> }</span>
<span id="cb1-266"><a href="#cb1-266"></a>+  WDownloadList*      window<span class="ot">()</span> { <span class="kw">return</span> m_window<span class="ot">;</span> }</span>
<span id="cb1-267"><a href="#cb1-267"></a>   <span class="kw">void</span>                set_view<span class="ot">(</span>core::View* l<span class="ot">);</span></span>
<span id="cb1-268"><a href="#cb1-268"></a> </span>
<span id="cb1-269"><a href="#cb1-269"></a>   <span class="kw">void</span>                receive_command<span class="ot">(</span><span class="kw">const</span> char* cmd<span class="ot">);</span></span>
<span id="cb1-270"><a href="#cb1-270"></a>diff --git a/src/ui/root.cc b/src/ui/root.cc</span>
<span id="cb1-271"><a href="#cb1-271"></a>index 981fcc2..2df0f5a <span class="dv">100644</span></span>
<span id="cb1-272"><a href="#cb1-272"></a>--- a/src/ui/root.cc</span>
<span id="cb1-273"><a href="#cb1-273"></a>+++ b/src/ui/root.cc</span>
<span id="cb1-274"><a href="#cb1-274"></a><span class="er">@@</span> <span class="dv">-44</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">44</span><span class="ot">,</span><span class="dv">7</span> <span class="er">@@</span></span>
<span id="cb1-275"><a href="#cb1-275"></a> </span>
<span id="cb1-276"><a href="#cb1-276"></a> <span class="co">#include &quot;core/manager.h&quot;</span></span>
<span id="cb1-277"><a href="#cb1-277"></a> <span class="co">#include &quot;display/frame.h&quot;</span></span>
<span id="cb1-278"><a href="#cb1-278"></a>+<span class="co">#include &quot;display/window_download_list.h&quot;</span></span>
<span id="cb1-279"><a href="#cb1-279"></a> <span class="co">#include &quot;display/window_http_queue.h&quot;</span></span>
<span id="cb1-280"><a href="#cb1-280"></a> <span class="co">#include &quot;display/window_title.h&quot;</span></span>
<span id="cb1-281"><a href="#cb1-281"></a> <span class="co">#include &quot;display/window_input.h&quot;</span></span>
<span id="cb1-282"><a href="#cb1-282"></a><span class="er">@@</span> <span class="dv">-65</span><span class="ot">,</span><span class="dv">7</span> +<span class="dv">66</span><span class="ot">,</span><span class="dv">15</span> <span class="er">@@</span> Root::Root<span class="ot">()</span> :</span>
<span id="cb1-283"><a href="#cb1-283"></a>   m_windowTitle<span class="ot">(</span><span class="kw">NULL</span><span class="ot">),</span></span>
<span id="cb1-284"><a href="#cb1-284"></a>   m_windowHttpQueue<span class="ot">(</span><span class="kw">NULL</span><span class="ot">),</span></span>
<span id="cb1-285"><a href="#cb1-285"></a>   m_windowInput<span class="ot">(</span><span class="kw">NULL</span><span class="ot">),</span></span>
<span id="cb1-286"><a href="#cb1-286"></a>-  m_windowStatusbar<span class="ot">(</span><span class="kw">NULL</span><span class="ot">)</span> {</span>
<span id="cb1-287"><a href="#cb1-287"></a>+  m_windowStatusbar<span class="ot">(</span><span class="kw">NULL</span><span class="ot">),</span></span>
<span id="cb1-288"><a href="#cb1-288"></a>+  color_inactive_fg<span class="ot">(</span>-<span class="dv">1</span><span class="ot">),</span></span>
<span id="cb1-289"><a href="#cb1-289"></a>+  color_inactive_bg<span class="ot">(</span>-<span class="dv">1</span><span class="ot">),</span></span>
<span id="cb1-290"><a href="#cb1-290"></a>+  color_dead_fg<span class="ot">(</span>-<span class="dv">1</span><span class="ot">),</span></span>
<span id="cb1-291"><a href="#cb1-291"></a>+  color_dead_bg<span class="ot">(</span>-<span class="dv">1</span><span class="ot">),</span></span>
<span id="cb1-292"><a href="#cb1-292"></a>+  color_active_fg<span class="ot">(</span>-<span class="dv">1</span><span class="ot">),</span></span>
<span id="cb1-293"><a href="#cb1-293"></a>+  color_active_bg<span class="ot">(</span>-<span class="dv">1</span><span class="ot">),</span></span>
<span id="cb1-294"><a href="#cb1-294"></a>+  color_finished_fg<span class="ot">(</span>-<span class="dv">1</span><span class="ot">),</span></span>
<span id="cb1-295"><a href="#cb1-295"></a>+  color_finished_bg<span class="ot">(</span>-<span class="dv">1</span><span class="ot">)</span> {</span>
<span id="cb1-296"><a href="#cb1-296"></a> }</span>
<span id="cb1-297"><a href="#cb1-297"></a> </span>
<span id="cb1-298"><a href="#cb1-298"></a> <span class="kw">void</span></span>
<span id="cb1-299"><a href="#cb1-299"></a><span class="er">@@</span> <span class="dv">-97</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">106</span><span class="ot">,</span><span class="dv">14</span> <span class="er">@@</span> Root::init<span class="ot">(</span>Control* c<span class="ot">)</span> {</span>
<span id="cb1-300"><a href="#cb1-300"></a>   setup_keys<span class="ot">();</span></span>
<span id="cb1-301"><a href="#cb1-301"></a> </span>
<span id="cb1-302"><a href="#cb1-302"></a>   m_downloadList-&gt;activate<span class="ot">(</span>rootFrame-&gt;frame<span class="ot">(</span><span class="dv">1</span><span class="ot">));</span></span>
<span id="cb1-303"><a href="#cb1-303"></a>+  m_downloadList-&gt;current_window_list<span class="ot">()</span>-&gt;set_color_inactive_fg<span class="ot">(</span>color_inactive_fg<span class="ot">);</span></span>
<span id="cb1-304"><a href="#cb1-304"></a>+  m_downloadList-&gt;current_window_list<span class="ot">()</span>-&gt;set_color_inactive_bg<span class="ot">(</span>color_inactive_bg<span class="ot">);</span></span>
<span id="cb1-305"><a href="#cb1-305"></a>+  m_downloadList-&gt;current_window_list<span class="ot">()</span>-&gt;set_color_dead_fg<span class="ot">(</span>color_dead_fg<span class="ot">);</span></span>
<span id="cb1-306"><a href="#cb1-306"></a>+  m_downloadList-&gt;current_window_list<span class="ot">()</span>-&gt;set_color_dead_bg<span class="ot">(</span>color_dead_bg<span class="ot">);</span></span>
<span id="cb1-307"><a href="#cb1-307"></a>+  m_downloadList-&gt;current_window_list<span class="ot">()</span>-&gt;set_color_active_fg<span class="ot">(</span>color_active_fg<span class="ot">);</span></span>
<span id="cb1-308"><a href="#cb1-308"></a>+  m_downloadList-&gt;current_window_list<span class="ot">()</span>-&gt;set_color_active_bg<span class="ot">(</span>color_active_bg<span class="ot">);</span></span>
<span id="cb1-309"><a href="#cb1-309"></a>+  m_downloadList-&gt;current_window_list<span class="ot">()</span>-&gt;set_color_finished_fg<span class="ot">(</span>color_finished_fg<span class="ot">);</span></span>
<span id="cb1-310"><a href="#cb1-310"></a>+  m_downloadList-&gt;current_window_list<span class="ot">()</span>-&gt;set_color_finished_bg<span class="ot">(</span>color_finished_bg<span class="ot">);</span></span>
<span id="cb1-311"><a href="#cb1-311"></a> }</span>
<span id="cb1-312"><a href="#cb1-312"></a> </span>
<span id="cb1-313"><a href="#cb1-313"></a> <span class="kw">void</span></span>
<span id="cb1-314"><a href="#cb1-314"></a><span class="er">@@</span> <span class="dv">-272</span><span class="ot">,</span><span class="dv">4</span> +<span class="dv">289</span><span class="ot">,</span><span class="dv">88</span> <span class="er">@@</span> Root::current_input<span class="ot">()</span> {</span>
<span id="cb1-315"><a href="#cb1-315"></a>   <span class="kw">return</span> m_windowInput-&gt;input<span class="ot">();</span></span>
<span id="cb1-316"><a href="#cb1-316"></a> }</span>
<span id="cb1-317"><a href="#cb1-317"></a> </span>
<span id="cb1-318"><a href="#cb1-318"></a>+<span class="co">// Inactive</span></span>
<span id="cb1-319"><a href="#cb1-319"></a>+<span class="kw">int</span></span>
<span id="cb1-320"><a href="#cb1-320"></a>+Root::get_color_inactive_fg<span class="ot">()</span> {</span>
<span id="cb1-321"><a href="#cb1-321"></a>+  <span class="kw">return</span> color_inactive_fg<span class="ot">;</span></span>
<span id="cb1-322"><a href="#cb1-322"></a>+}</span>
<span id="cb1-323"><a href="#cb1-323"></a>+</span>
<span id="cb1-324"><a href="#cb1-324"></a>+<span class="kw">void</span></span>
<span id="cb1-325"><a href="#cb1-325"></a>+Root::set_color_inactive_fg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-326"><a href="#cb1-326"></a>+  color_inactive_fg = color<span class="ot">;</span></span>
<span id="cb1-327"><a href="#cb1-327"></a>+}</span>
<span id="cb1-328"><a href="#cb1-328"></a>+</span>
<span id="cb1-329"><a href="#cb1-329"></a>+<span class="kw">int</span></span>
<span id="cb1-330"><a href="#cb1-330"></a>+Root::get_color_inactive_bg<span class="ot">()</span> {</span>
<span id="cb1-331"><a href="#cb1-331"></a>+  <span class="kw">return</span> color_inactive_bg<span class="ot">;</span></span>
<span id="cb1-332"><a href="#cb1-332"></a>+}</span>
<span id="cb1-333"><a href="#cb1-333"></a>+</span>
<span id="cb1-334"><a href="#cb1-334"></a>+<span class="kw">void</span></span>
<span id="cb1-335"><a href="#cb1-335"></a>+Root::set_color_inactive_bg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-336"><a href="#cb1-336"></a>+  color_inactive_bg = color<span class="ot">;</span></span>
<span id="cb1-337"><a href="#cb1-337"></a>+}</span>
<span id="cb1-338"><a href="#cb1-338"></a>+</span>
<span id="cb1-339"><a href="#cb1-339"></a>+<span class="co">// Dead</span></span>
<span id="cb1-340"><a href="#cb1-340"></a>+<span class="kw">int</span></span>
<span id="cb1-341"><a href="#cb1-341"></a>+Root::get_color_dead_fg<span class="ot">()</span> {</span>
<span id="cb1-342"><a href="#cb1-342"></a>+  <span class="kw">return</span> color_dead_fg<span class="ot">;</span></span>
<span id="cb1-343"><a href="#cb1-343"></a>+}</span>
<span id="cb1-344"><a href="#cb1-344"></a>+</span>
<span id="cb1-345"><a href="#cb1-345"></a>+<span class="kw">void</span></span>
<span id="cb1-346"><a href="#cb1-346"></a>+Root::set_color_dead_fg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-347"><a href="#cb1-347"></a>+  color_dead_fg = color<span class="ot">;</span></span>
<span id="cb1-348"><a href="#cb1-348"></a>+}</span>
<span id="cb1-349"><a href="#cb1-349"></a>+</span>
<span id="cb1-350"><a href="#cb1-350"></a>+<span class="kw">int</span></span>
<span id="cb1-351"><a href="#cb1-351"></a>+Root::get_color_dead_bg<span class="ot">()</span> {</span>
<span id="cb1-352"><a href="#cb1-352"></a>+  <span class="kw">return</span> color_dead_bg<span class="ot">;</span></span>
<span id="cb1-353"><a href="#cb1-353"></a>+}</span>
<span id="cb1-354"><a href="#cb1-354"></a>+</span>
<span id="cb1-355"><a href="#cb1-355"></a>+<span class="kw">void</span></span>
<span id="cb1-356"><a href="#cb1-356"></a>+Root::set_color_dead_bg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-357"><a href="#cb1-357"></a>+  color_dead_bg = color<span class="ot">;</span></span>
<span id="cb1-358"><a href="#cb1-358"></a>+}</span>
<span id="cb1-359"><a href="#cb1-359"></a>+</span>
<span id="cb1-360"><a href="#cb1-360"></a>+<span class="co">// Active</span></span>
<span id="cb1-361"><a href="#cb1-361"></a>+<span class="kw">int</span></span>
<span id="cb1-362"><a href="#cb1-362"></a>+Root::get_color_active_fg<span class="ot">()</span> {</span>
<span id="cb1-363"><a href="#cb1-363"></a>+  <span class="kw">return</span> color_active_fg<span class="ot">;</span></span>
<span id="cb1-364"><a href="#cb1-364"></a>+}</span>
<span id="cb1-365"><a href="#cb1-365"></a>+</span>
<span id="cb1-366"><a href="#cb1-366"></a>+<span class="kw">void</span></span>
<span id="cb1-367"><a href="#cb1-367"></a>+Root::set_color_active_fg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-368"><a href="#cb1-368"></a>+  color_active_fg = color<span class="ot">;</span></span>
<span id="cb1-369"><a href="#cb1-369"></a>+}</span>
<span id="cb1-370"><a href="#cb1-370"></a>+</span>
<span id="cb1-371"><a href="#cb1-371"></a>+<span class="kw">int</span></span>
<span id="cb1-372"><a href="#cb1-372"></a>+Root::get_color_active_bg<span class="ot">()</span> {</span>
<span id="cb1-373"><a href="#cb1-373"></a>+  <span class="kw">return</span> color_active_bg<span class="ot">;</span></span>
<span id="cb1-374"><a href="#cb1-374"></a>+}</span>
<span id="cb1-375"><a href="#cb1-375"></a>+</span>
<span id="cb1-376"><a href="#cb1-376"></a>+<span class="kw">void</span></span>
<span id="cb1-377"><a href="#cb1-377"></a>+Root::set_color_active_bg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-378"><a href="#cb1-378"></a>+  color_active_bg = color<span class="ot">;</span></span>
<span id="cb1-379"><a href="#cb1-379"></a>+}</span>
<span id="cb1-380"><a href="#cb1-380"></a>+</span>
<span id="cb1-381"><a href="#cb1-381"></a>+<span class="co">// Finished</span></span>
<span id="cb1-382"><a href="#cb1-382"></a>+<span class="kw">int</span></span>
<span id="cb1-383"><a href="#cb1-383"></a>+Root::get_color_finished_fg<span class="ot">()</span> {</span>
<span id="cb1-384"><a href="#cb1-384"></a>+  <span class="kw">return</span> color_finished_fg<span class="ot">;</span></span>
<span id="cb1-385"><a href="#cb1-385"></a>+}</span>
<span id="cb1-386"><a href="#cb1-386"></a>+</span>
<span id="cb1-387"><a href="#cb1-387"></a>+<span class="kw">void</span></span>
<span id="cb1-388"><a href="#cb1-388"></a>+Root::set_color_finished_fg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-389"><a href="#cb1-389"></a>+  color_finished_fg = color<span class="ot">;</span></span>
<span id="cb1-390"><a href="#cb1-390"></a>+}</span>
<span id="cb1-391"><a href="#cb1-391"></a>+</span>
<span id="cb1-392"><a href="#cb1-392"></a>+<span class="kw">int</span></span>
<span id="cb1-393"><a href="#cb1-393"></a>+Root::get_color_finished_bg<span class="ot">()</span> {</span>
<span id="cb1-394"><a href="#cb1-394"></a>+  <span class="kw">return</span> color_finished_bg<span class="ot">;</span></span>
<span id="cb1-395"><a href="#cb1-395"></a>+}</span>
<span id="cb1-396"><a href="#cb1-396"></a>+</span>
<span id="cb1-397"><a href="#cb1-397"></a>+<span class="kw">void</span></span>
<span id="cb1-398"><a href="#cb1-398"></a>+Root::set_color_finished_bg<span class="ot">(</span>int64_t color<span class="ot">)</span> {</span>
<span id="cb1-399"><a href="#cb1-399"></a>+  color_finished_bg = color<span class="ot">;</span></span>
<span id="cb1-400"><a href="#cb1-400"></a>+}</span>
<span id="cb1-401"><a href="#cb1-401"></a>+</span>
<span id="cb1-402"><a href="#cb1-402"></a> }</span>
<span id="cb1-403"><a href="#cb1-403"></a>diff --git a/src/ui/root.h b/src/ui/root.h</span>
<span id="cb1-404"><a href="#cb1-404"></a>index cbc5ff4..a550aeb <span class="dv">100644</span></span>
<span id="cb1-405"><a href="#cb1-405"></a>--- a/src/ui/root.h</span>
<span id="cb1-406"><a href="#cb1-406"></a>+++ b/src/ui/root.h</span>
<span id="cb1-407"><a href="#cb1-407"></a><span class="er">@@</span> <span class="dv">-83</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">83</span><span class="ot">,</span><span class="dv">23</span> <span class="er">@@</span> <span class="kw">public</span>:</span>
<span id="cb1-408"><a href="#cb1-408"></a>   <span class="kw">void</span>                set_down_throttle_i64<span class="ot">(</span>int64_t throttle<span class="ot">)</span> { set_down_throttle<span class="ot">(</span>throttle &gt;&gt; <span class="dv">10</span><span class="ot">);</span> }</span>
<span id="cb1-409"><a href="#cb1-409"></a>   <span class="kw">void</span>                set_up_throttle_i64<span class="ot">(</span>int64_t throttle<span class="ot">)</span>   { set_up_throttle<span class="ot">(</span>throttle &gt;&gt; <span class="dv">10</span><span class="ot">);</span> }</span>
<span id="cb1-410"><a href="#cb1-410"></a> </span>
<span id="cb1-411"><a href="#cb1-411"></a>+  <span class="kw">int</span>                 get_color_inactive_fg<span class="ot">();</span></span>
<span id="cb1-412"><a href="#cb1-412"></a>+  <span class="kw">void</span>                set_color_inactive_fg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-413"><a href="#cb1-413"></a>+  <span class="kw">int</span>                 get_color_inactive_bg<span class="ot">();</span></span>
<span id="cb1-414"><a href="#cb1-414"></a>+  <span class="kw">void</span>                set_color_inactive_bg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-415"><a href="#cb1-415"></a>+  <span class="kw">int</span>                 get_color_dead_fg<span class="ot">();</span></span>
<span id="cb1-416"><a href="#cb1-416"></a>+  <span class="kw">void</span>                set_color_dead_fg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-417"><a href="#cb1-417"></a>+  <span class="kw">int</span>                 get_color_dead_bg<span class="ot">();</span></span>
<span id="cb1-418"><a href="#cb1-418"></a>+  <span class="kw">void</span>                set_color_dead_bg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-419"><a href="#cb1-419"></a>+  <span class="kw">int</span>                 get_color_active_fg<span class="ot">();</span></span>
<span id="cb1-420"><a href="#cb1-420"></a>+  <span class="kw">void</span>                set_color_active_fg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-421"><a href="#cb1-421"></a>+  <span class="kw">int</span>                 get_color_active_bg<span class="ot">();</span></span>
<span id="cb1-422"><a href="#cb1-422"></a>+  <span class="kw">void</span>                set_color_active_bg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-423"><a href="#cb1-423"></a>+  <span class="kw">int</span>                 get_color_finished_fg<span class="ot">();</span></span>
<span id="cb1-424"><a href="#cb1-424"></a>+  <span class="kw">void</span>                set_color_finished_fg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-425"><a href="#cb1-425"></a>+  <span class="kw">int</span>                 get_color_finished_bg<span class="ot">();</span></span>
<span id="cb1-426"><a href="#cb1-426"></a>+  <span class="kw">void</span>                set_color_finished_bg<span class="ot">(</span>int64_t color<span class="ot">);</span></span>
<span id="cb1-427"><a href="#cb1-427"></a>+</span>
<span id="cb1-428"><a href="#cb1-428"></a>   <span class="kw">void</span>                adjust_down_throttle<span class="ot">(</span><span class="kw">int</span> throttle<span class="ot">);</span></span>
<span id="cb1-429"><a href="#cb1-429"></a>   <span class="kw">void</span>                adjust_up_throttle<span class="ot">(</span><span class="kw">int</span> throttle<span class="ot">);</span></span>
<span id="cb1-430"><a href="#cb1-430"></a> </span>
<span id="cb1-431"><a href="#cb1-431"></a><span class="er">@@</span> <span class="dv">-105</span><span class="ot">,</span><span class="dv">6</span> +<span class="dv">122</span><span class="ot">,</span><span class="dv">15</span> <span class="er">@@</span> <span class="kw">private</span>:</span>
<span id="cb1-432"><a href="#cb1-432"></a>   WStatusbar*         m_windowStatusbar<span class="ot">;</span></span>
<span id="cb1-433"><a href="#cb1-433"></a> </span>
<span id="cb1-434"><a href="#cb1-434"></a>   input::Bindings     m_bindings<span class="ot">;</span></span>
<span id="cb1-435"><a href="#cb1-435"></a>+</span>
<span id="cb1-436"><a href="#cb1-436"></a>+  int64_t             color_inactive_fg<span class="ot">;</span></span>
<span id="cb1-437"><a href="#cb1-437"></a>+  int64_t             color_inactive_bg<span class="ot">;</span></span>
<span id="cb1-438"><a href="#cb1-438"></a>+  int64_t             color_dead_fg<span class="ot">;</span></span>
<span id="cb1-439"><a href="#cb1-439"></a>+  int64_t             color_dead_bg<span class="ot">;</span></span>
<span id="cb1-440"><a href="#cb1-440"></a>+  int64_t             color_active_fg<span class="ot">;</span></span>
<span id="cb1-441"><a href="#cb1-441"></a>+  int64_t             color_active_bg<span class="ot">;</span></span>
<span id="cb1-442"><a href="#cb1-442"></a>+  int64_t             color_finished_fg<span class="ot">;</span></span>
<span id="cb1-443"><a href="#cb1-443"></a>+  int64_t             color_finished_bg<span class="ot">;</span></span>
<span id="cb1-444"><a href="#cb1-444"></a> }<span class="ot">;</span></span>
<span id="cb1-445"><a href="#cb1-445"></a> </span>
<span id="cb1-446"><a href="#cb1-446"></a> }</span></code></pre></div>
<hr />
</details>
<p>Скачиваем и распаковываем исходники с официального сайта rtorrent. Нам нужна версия <code>0.9.6</code>, так как в репозитории Debian 9 именно такая версия:</p>
<pre><code>$ wget -qO - http://rtorrent.net/downloads/rtorrent-0.9.6.tar.gz | tar zxvf -
</code></pre>
<p>Патч <code>rtorrent-0.9.6_color.patch</code> необходимо положить в папку с нашими исходниками <code>rtorrent-0.9.6</code>:</p>
<pre><code>$ mv rtorrent-0.9.6_color.patch /home/user_name/rtorrent-0.9.6/
</code></pre>
<p>Теперь переходим в папку с исходниками, накладываем наш патч и собираем rtorrent:</p>
<hr />
<pre><code>$ cd rtorrent-0.9.6
$ patch -uNp1 -i rtorrent-0.9.6_color.patch
$ sed '/AM_PATH_CPPUNIT/d' -i configure.ac
$ ./autogen.sh
$ CPPFLAGS=&quot;-I/usr/include/ncursesw/&quot; ./configure --with-xmlrpc-c --prefix=/usr
$ make
$ sudo make install
</code></pre>
<hr />
<blockquote>
<p>Если сборка заканчивается неудачей - это свидетельствует об отсутствии в вашей системе необходимых библиотек. Их нужно будет доустановить, после чего запустить сборку повторно.</p>
</blockquote>
<p>Теперь остаётся задать необходимые цвета в конфигурационном файле rtorrent’a <code>.rtorrent.rc</code>:</p>
<hr />
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Colors</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co"># Colors: 0 = black  1 = red  </span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#         2 = green  3 = yellow </span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#         4 = blue   5 = magenta </span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#         6 = cyan   7 = white</span></span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="ex">color_active_fg</span>   = 3</span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="ex">color_inactive_fg</span> = 2</span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="ex">color_dead_fg</span>     = 1</span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="ex">color_finished_fg</span> = 6</span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="ex">color_active_bg</span>   = 4</span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="ex">color_inactive_bg</span> = 0</span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="ex">color_dead_bg</span>     = 0</span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="ex">color_finished_bg</span> = 0</span></code></pre></div>
<hr />
<p>Запускаем rtorrent и смотрим результат:</p>
<p><img src="http://images2.imagebam.com/b9/6f/81/8fbe551008897814.png" /></p>

<div id="comment">
<a href="https://github.com/ChubaDuba/chubaduba.github.io/issues/36"><img src="../images/comment.png" alt="Комментарий на GitHub" height="34" width="256" /></a>
</div>
    <div style="clear: both"></div>
    <div id="footer">
        <a href="https://validator.w3.org/check?uri=https://chubaduba.github.io/" style="color: #709180">XHTML</a>
        Site generated by
        <a href="http://jaspervdj.be/hakyll" style="color: #DC8BC3">Hakyll</a>
        <div id="cc">    
             <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.ru" style="color: #E0AF8F">© Aleksey Chubakov, 2018-2020 licensed under CC BY-SA 4.0</a>
        </div>    
    </div>
</div>

        
        <!-- Yandex.Metrika counter -->
        <script type="text/javascript">
            (function (d, w, c) {
                (w[c] = w[c] || []).push(function() {
                    try {
                        w.yaCounter47788555 = new Ya.Metrika({
                            id:47788555,
                            clickmap:true,
                            trackLinks:true,
                            accurateTrackBounce:true,
                            webvisor:true
                        });
                    } catch(e) { }
                });

                var n = d.getElementsByTagName("script")[0],
                    s = d.createElement("script"),
                    f = function () { n.parentNode.insertBefore(s, n); };
                s.type = "text/javascript";
                s.async = true;
                s.src = "https://mc.yandex.ru/metrika/watch.js";

                if (w.opera == "[object Opera]") {
                    d.addEventListener("DOMContentLoaded", f, false);
                } else { f(); }
            })(document, window, "yandex_metrika_callbacks");
        </script>
        <!-- /Yandex.Metrika counter -->

        <!-- Google Analytics -->
        <script type="text/javascript">
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
        
        ga('create', 'UA-114689555-1', 'auto');
        ga('send', 'pageview');
        </script>
        <!-- End Google Analytics -->             

        <div style="display: none">ce0f13b2-4a83-4c1c-b2b9-b6d18f4ee6d2</div>
    </body>
</html>
