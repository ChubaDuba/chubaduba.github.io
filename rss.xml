<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"
    xmlns:dc="http://purl.org/dc/elements/1.1/">
    <channel>
        <title>ChubaDuba - Все посты</title>
        <link>https://chubaduba.github.io/</link>
        <description><![CDATA[Блог ChubaDuba]]></description>
        <atom:link href="https://chubaduba.github.io//rss.xml" rel="self"
                   type="application/rss+xml" />
        <lastBuildDate>Mon, 23 Apr 2018 00:00:00 UT</lastBuildDate>
        <item>
    <title>Xmobar. Информация о текущем треке (MOC плеер).</title>
    <link>https://chubaduba.github.io//posts/2018-04-23-1.html</link>
    <description><![CDATA[<p>Иногда бывает нужно посмотреть имя исполнителя и название трека, который в данный момент воспроизводит ваш аудиоплеер. Ниже приведён скрипт, результатом работы которого является строка, содержащая имя исполнителя и название композиции.</p>
<blockquote>
<p>Скрипт работает только в том случае, если в качестве аудиоплеера вы используете <a href="http://moc.daper.net">MOC</a>.</p>
</blockquote>
<hr />
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co">#! /bin/bash</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="va">TCOL=</span><span class="st">&quot;#8C8C8C&quot;</span>    </a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="va">ACOL=</span><span class="st">&quot;#E0AF8F&quot;</span>    </a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="va">DCOL=</span><span class="st">&quot;#637482&quot;</span>    </a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="va">PCOL=</span><span class="st">&quot;#4F4F4F&quot;</span>    </a>
<a class="sourceLine" id="cb1-7" data-line-number="7"></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="va">MOCSTATE=$(</span><span class="ex">mocp</span> --info <span class="kw">|</span> <span class="fu">head</span> -n 1 <span class="kw">|</span> <span class="fu">tail</span> -c +8<span class="va">)</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="kw">if</span><span class="bu"> [</span> <span class="va">$MOCSTATE</span> <span class="ot">==</span> <span class="st">&quot;PLAY&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">  <span class="co"># MOC на воспроизведении</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12">  <span class="bu">echo</span> <span class="st">&quot;&lt;fc=</span><span class="va">$ACOL</span><span class="st">&gt;</span><span class="va">$(</span><span class="ex">mocp</span> --info <span class="kw">|</span> <span class="fu">tail</span> -n +4 <span class="kw">|</span> <span class="fu">head</span> -n 1 <span class="kw">|</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13">       <span class="fu">tail</span> -c +9<span class="va">)</span><span class="st">&lt;/fc&gt; &lt;fc=</span><span class="va">$DCOL</span><span class="st">&gt;-&lt;/fc&gt; &lt;fc=</span><span class="va">$TCOL</span><span class="st">&gt;</span><span class="va">$(</span><span class="ex">mocp</span> --info <span class="kw">|</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14">       <span class="fu">tail</span> -n +5 <span class="kw">|</span> <span class="fu">head</span> -n 1 <span class="kw">|</span> <span class="fu">tail</span> -c +12<span class="va">)</span><span class="st">&lt;/fc&gt;&quot;</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="kw">elif</span><span class="bu"> [</span> <span class="va">$MOCSTATE</span> <span class="ot">==</span> <span class="st">&quot;PAUSE&quot;</span><span class="bu"> ]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17">  <span class="co"># MOC на паузе</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18">  <span class="bu">echo</span> <span class="st">&quot;&lt;fc=</span><span class="va">$PCOL</span><span class="st">&gt;</span><span class="va">$(</span><span class="ex">mocp</span> --info <span class="kw">|</span> <span class="fu">tail</span> -n +4 <span class="kw">|</span> <span class="fu">head</span> -n 1 <span class="kw">|</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19">       <span class="fu">tail</span> -c +9<span class="va">)</span><span class="st"> - </span><span class="va">$(</span><span class="ex">mocp</span> --info <span class="kw">|</span> <span class="fu">tail</span> -n +5 <span class="kw">|</span> <span class="fu">head</span> -n 1 <span class="kw">|</span> <span class="fu">tail</span> -c +12<span class="va">)</span><span class="st">&lt;/fc&gt;&quot;</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="kw">fi</span></a></code></pre></div>
<hr />
<figure>
<img src="http://images2.imagebam.com/56/3e/90/2fea4c832464493.png" alt="MOC плеер" /><figcaption>MOC плеер</figcaption>
</figure>]]></description>
    <pubDate>Mon, 23 Apr 2018 00:00:00 UT</pubDate>
    <guid>https://chubaduba.github.io//posts/2018-04-23-1.html</guid>
    <dc:creator>ChubaDuba</dc:creator>
</item>
<item>
    <title>Xmonad. Окно, которое всегда под рукой.</title>
    <link>https://chubaduba.github.io//posts/2018-04-20-1.html</link>
    <description><![CDATA[<p>При работе иногда бывает удобно иметь под рукой какое-нибудь открытое приложение, например, окно терминала, файловый менеджер или любую другую программу, к которой необходим быстрый доступ. В <code>xmonad</code> есть утилита <a href="https://hackage.haskell.org/package/xmonad-contrib-0.13/docs/XMonad-Util-NamedScratchpad.html">XMonad.Util.NamedScratchpad</a>, которая позволяет организовать работу с приложениями таким образом.</p>
<p>Я покажу как работает эта утилита на примере эмулятора терминала <a href="http://software.schmorp.de/pkg/rxvt-unicode.html">urxvt</a> и файлового менеджера <a href="https://ignorantguru.github.io/spacefm/">SpaceFM</a>.</p>
<p>Добавляем утилиту в наш конфигурационный файл <code>xmonad.hs</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">import</span> <span class="dt">XMonad.Util.NamedScratchpad</span></a></code></pre></div>
<p>В секцию myManageHook добавляем:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" data-line-number="1">myManageHook <span class="fu">=</span>  composeAll <span class="fu">$</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">         [ <span class="fu">...</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">         , <span class="fu">...</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5">         , <span class="fu">...</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6">         ]</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">         </a>
<a class="sourceLine" id="cb2-8" data-line-number="8">         <span class="fu">++</span> [namedScratchpadManageHook scratchpads]</a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="fu">...</span></a></code></pre></div>
<p>Пишем правила для приложений. В нашем случае для <code>urxvt</code> и s<code>pacefm</code>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" data-line-number="1">scratchpads <span class="fu">=</span> [</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">            </a>
<a class="sourceLine" id="cb3-3" data-line-number="3">              <span class="dt">NS</span> <span class="st">&quot;terminal&quot;</span> <span class="st">&quot;urxvt -name scratchpad&quot;</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">                (wm_name <span class="fu">=?</span> <span class="st">&quot;scratchpad&quot;</span>)</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">                (customFloating <span class="fu">$</span> <span class="dt">W.RationalRect</span> <span class="dv">0</span> <span class="fl">0.9</span> <span class="dv">1</span> <span class="fl">0.1</span>),</a>
<a class="sourceLine" id="cb3-6" data-line-number="6">              </a>
<a class="sourceLine" id="cb3-7" data-line-number="7">              <span class="dt">NS</span> <span class="st">&quot;spacefm&quot;</span> <span class="st">&quot;spacefm&quot;</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">                (className <span class="fu">=?</span> <span class="st">&quot;Spacefm&quot;</span>)</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">                (customFloating <span class="fu">$</span> <span class="dt">W.RationalRect</span> <span class="dv">0</span> <span class="fl">0.6</span> <span class="dv">1</span> <span class="fl">0.4</span>),</a>
<a class="sourceLine" id="cb3-10" data-line-number="10">            </a>
<a class="sourceLine" id="cb3-11" data-line-number="11">              ]</a>
<a class="sourceLine" id="cb3-12" data-line-number="12">              </a>
<a class="sourceLine" id="cb3-13" data-line-number="13">              <span class="kw">where</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14">                    wm_name <span class="fu">=</span> stringProperty <span class="st">&quot;WM_NAME&quot;</span></a></code></pre></div>
<p>“Вешаем” на нужные нам клавиши:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" data-line-number="1">myKeys <span class="fu">=</span> [</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">           <span class="fu">...</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3">         , ((<span class="dv">0</span>,        <span class="bn">0xffbe</span>), namedScratchpadAction scratchpads <span class="st">&quot;terminal&quot;</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">         , ((mod4Mask,   xK_f), namedScratchpadAction scratchpads <span class="st">&quot;spacefm&quot;</span>)</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb4-6" data-line-number="6">         ]</a></code></pre></div>
<p>Готово. Открыть, скрыть/показать терминал: <code>F1</code><br />
Открыть, скрыть/показать файловый менеджер: <code>mod4Mask+f</code><br />
Чтобы открыть терминал в обычном режиме используем клавиши по умолчанию: <code>mod4Mask+Shift+Enter</code>.</p>
<figure>
<img src="http://images2.imagebam.com/e5/45/1c/556917828853913.png" alt="urxvt" /><figcaption>urxvt</figcaption>
</figure>
<figure>
<img src="http://images2.imagebam.com/32/6c/f9/580398828854143.png" alt="SpaceFM" /><figcaption>SpaceFM</figcaption>
</figure>
<p>На самом деле окна не скрываются и не закрываются, а переносятся на скрытый рабочий стол с именем <code>NSP</code>, который будет отображаться в <code>xmobar</code>:</p>
<p><img src="http://images2.imagebam.com/81/03/6c/e6b6c5828931143.png" /></p>
<p>Таким же способом можно запускать программу в терминале. Например, у меня по <code>F2</code> запускается календарь:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" data-line-number="1">scratchpads <span class="fu">=</span> [</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">       </a>
<a class="sourceLine" id="cb5-4" data-line-number="4">         <span class="dt">NS</span> <span class="st">&quot;cal&quot;</span> <span class="st">&quot;urxvt -name cal -hold -e cal -y&quot;</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">           (wm_name <span class="fu">=?</span> <span class="st">&quot;cal&quot;</span>)</a>
<a class="sourceLine" id="cb5-6" data-line-number="6">           (customFloating <span class="fu">$</span> <span class="dt">W.RationalRect</span> <span class="fl">0.58</span> <span class="fl">0.023</span> <span class="fl">0.42</span> <span class="fl">0.82</span>),</a>
<a class="sourceLine" id="cb5-7" data-line-number="7">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8">         ]</a>
<a class="sourceLine" id="cb5-9" data-line-number="9"></a>
<a class="sourceLine" id="cb5-10" data-line-number="10">myKeys <span class="fu">=</span> [</a>
<a class="sourceLine" id="cb5-11" data-line-number="11">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12">         , ((<span class="dv">0</span>,     <span class="bn">0xffbf</span>), namedScratchpadAction scratchpads <span class="st">&quot;cal&quot;</span>)</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb5-14" data-line-number="14">         ]</a></code></pre></div>
<p><img src="http://images2.imagebam.com/68/cc/17/9fae33828854383.png" /></p>]]></description>
    <pubDate>Fri, 20 Apr 2018 00:00:00 UT</pubDate>
    <guid>https://chubaduba.github.io//posts/2018-04-20-1.html</guid>
    <dc:creator>ChubaDuba</dc:creator>
</item>
<item>
    <title>Cтрока ввода команд в Xmonad.</title>
    <link>https://chubaduba.github.io//posts/2018-04-19-1.html</link>
    <description><![CDATA[<p>Сегодня расскажу об очень удобной, на мой взгляд, фишке, которой я постоянно пользуюсь при использовании xmonad. Речь пойдёт о <font color="#92E0E2"><em>строке ввода команд</em></font>. Реализуется это двумя модулями <a href="http://hackage.haskell.org/package/xmonad-contrib-0.13/docs/XMonad-Prompt.html">XMonad.Prompt</a> и <a href="http://hackage.haskell.org/package/xmonad-contrib-0.13/docs/XMonad-Prompt-Shell.html">XMonad.Prompt.Shell</a>. Добавляем эти модули в наш <code>xmonad.hs</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">import</span> <span class="dt">XMonad.Prompt</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">import</span> <span class="dt">XMonad.Prompt.Shell</span></a></code></pre></div>
<p>Ну и, конечно, нужно задать комбинацию клавиш, при нажатии которой будет открываться строка ввода. Для себя я выбрал комбинацию <code>mod4Mask+p</code>. Добавляем её в наш конфиг:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" data-line-number="1">, ((mod4Mask,   xK_p), shellPrompt defaultXPConfig)</a></code></pre></div>
<p>После внесения всех этих изменений, при нажатии выбранной комбинации в нижней части экрана будет появляться строка ввода. Закрыть её можно нажав клавишу <code>Esc</code>:</p>
<p><a href="http://www.imagebam.com/image/b83a7b825534583" target="_blank"><img src="http://thumbs2.imagebam.com/bf/b6/b7/b83a7b825534583.jpg" alt="ImageBam image upload"></a></p>
<p>Мне не понравилось то, что строка открывается внизу экрана, имеет очень мелкий шрифт, и её цветовое оформление не сочетается с моими настройками. Чтобы всё это изменить, я добавил в <code>xmonad.hs</code> свою конфигурацию окна строки ввода <code>myXPConfig</code>, в которой указал нужные мне параметры:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" data-line-number="1"> <span class="co">-- Prompt</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">myXPConfig <span class="fu">=</span> defaultXPConfig</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">         { font                <span class="fu">=</span> myFont</a>
<a class="sourceLine" id="cb3-5" data-line-number="5">         , bgColor             <span class="fu">=</span> <span class="st">&quot;#2F2F2F&quot;</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">         , fgColor             <span class="fu">=</span> <span class="st">&quot;#709180&quot;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">         , bgHLight            <span class="fu">=</span> <span class="st">&quot;#2F2F2F&quot;</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8">         , fgHLight            <span class="fu">=</span> <span class="st">&quot;#F0E0AF&quot;</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">         , promptBorderWidth   <span class="fu">=</span> <span class="dv">0</span> </a>
<a class="sourceLine" id="cb3-10" data-line-number="10">         , position            <span class="fu">=</span> <span class="dt">Top</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11">         , height              <span class="fu">=</span> <span class="dv">20</span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12">         , historySize         <span class="fu">=</span> <span class="dv">100</span> </a>
<a class="sourceLine" id="cb3-13" data-line-number="13">         , historyFilter       <span class="fu">=</span> deleteConsecutive</a>
<a class="sourceLine" id="cb3-14" data-line-number="14">         }</a></code></pre></div>
<p>Соответственно, внёс изменения для комбинации клавиш, заменив <code>defaultXPConfig</code> на <code>myXPConfig</code>. Теперь строчка в конфиге будет иметь вот такой вид:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb4-1" data-line-number="1">, ((mod4Mask,   xK_p), shellPrompt myXPConfig)</a></code></pre></div>
<p>После этих изменений всё стало так, как нужно мне:</p>
<p><a href="http://www.imagebam.com/image/fb0f65825574363" target="_blank"><img src="http://thumbs2.imagebam.com/6a/e0/07/fb0f65825574363.jpg" alt="imagebam.com"></a></p>
<p><a href="http://www.imagebam.com/image/55a8e6825581853" target="_blank"><img src="http://thumbs2.imagebam.com/00/71/42/55a8e6825581853.jpg" alt="imagebam.com"></a></p>
<p>Чтобы каждый раз не вводить в строку однотипные команды, например, команду <code>urxvt -e</code> для открытия консольного приложения в новом окне терминала, эту команду можно прописать в <code>myXPConfig</code> следующим образом:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb5-1" data-line-number="1">myXPConfig <span class="fu">=</span> defaultXPConfig</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">         { <span class="fu">...</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3">         , defaultText <span class="fu">=</span> <span class="st">&quot;urxvt -e&quot;</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">         }</a></code></pre></div>
<p>Теперь при запуске строка ввода будет иметь такой вид:</p>
<p><img src="http://images2.imagebam.com/96/25/02/88856e825632023.png" /></p>
<p>На этом сегодня всё. О других способах использования строки ввода <code>XMonad.Prompt</code> я обязательно расскажу позднее.</p>]]></description>
    <pubDate>Thu, 19 Apr 2018 00:00:00 UT</pubDate>
    <guid>https://chubaduba.github.io//posts/2018-04-19-1.html</guid>
    <dc:creator>ChubaDuba</dc:creator>
</item>
<item>
    <title>Вывод в xmobar информации о доступных обновлениях.</title>
    <link>https://chubaduba.github.io//posts/2018-04-16-1.html</link>
    <description><![CDATA[<p>Xmobar сам не умеет показывать информацию о доступных обновлениях в системе, но это легко поправить с помощью скрипта.</p>
<p>Так как у меня установлен Debian, пользоваться я буду инструментом под названием <a href="https://wiki.debian.org/ru/Aptitude">aptitude</a>. Чтобы посмотреть в консоли количество доступных пакетов для обновления, необходимо сначала обновить список пакетов, выполнив в терминале команду:</p>
<pre><code># apt-get update
</code></pre>
<p>После того как список пакетов у нас обновиться, можно посмотреть количество доступных обновлений, набрав в терминале команду:</p>
<pre><code>$ aptitude search &quot;~U&quot; | wc -l
</code></pre>
<p>Как автоматизировать обновление списка пакетов командой <code>apt-get update</code> можно почитать <a href="https://chubaduba.github.io/posts/2018-04-08-1.html">тут</a>.</p>
<p>Остаётся написать скрипт который будет выводить количество возможных обновлений. После недолгих раздумий у меня получился вот такой скрипт:</p>
<hr />
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">#! /bin/bash</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="va">NEWCOLOR=</span><span class="st">&quot;#DBA3A2&quot;</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="va">HOLDS=</span>2 </a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="va">UPDATES=$(</span><span class="ex">aptitude</span> search <span class="st">&quot;~U&quot;</span> <span class="kw">|</span> <span class="fu">wc</span> -l<span class="va">)</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="va">PKGS=$(($UPDATES</span>-<span class="va">$HOLDS))</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="kw">if</span><span class="bu"> [</span> <span class="va">$PKGS</span> <span class="ot">==</span> 0<span class="bu"> ]</span>; <span class="kw">then</span> <span class="bu">exit</span> 0</a>
<a class="sourceLine" id="cb3-11" data-line-number="11"></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="kw">else</span>   </a>
<a class="sourceLine" id="cb3-13" data-line-number="13">   <span class="bu">echo</span> <span class="st">&quot;&lt;fc=</span><span class="va">$NEWCOLOR</span><span class="st">&gt;updates:</span><span class="va">$PKGS</span><span class="st">&lt;/fc&gt;&quot;</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="kw">fi</span></a></code></pre></div>
<hr />
<p>В принципе, тут всё просто. Единственное, стоит обрать внимание на переменную <code>HOLDS</code>, задающую количество пакетов, которым запрещено обновляться при регулярном обновлении системы. Если у вас в системе таких пакетов нет, то данной переменной нужно присвоить значение ноль.</p>
<p>Если обновлений нет, скрипт завершает свою работу. Если обновления есть, скрипт будет выводить количество обновлений:</p>
<p><img src="http://images2.imagebam.com/dc/cd/24/8acab6821982123.png" /></p>
<p>Остаётся лишь добавить отображение результата выполнения скрипта в <code>xmobar</code>. Добавляем в <code>xmobarrc</code>:</p>
<pre><code>commands = [
                ...
                Run Com &quot;/путь_до_скрипта/updates&quot; [] &quot;updates&quot; 3600,
                ...
                ]
       ...
       , template = &quot; %StdinReader% }{ ... %updates% ...}
</code></pre>]]></description>
    <pubDate>Mon, 16 Apr 2018 00:00:00 UT</pubDate>
    <guid>https://chubaduba.github.io//posts/2018-04-16-1.html</guid>
    <dc:creator>ChubaDuba</dc:creator>
</item>
<item>
    <title>"Never forget" wallpaper</title>
    <link>https://chubaduba.github.io//posts/2018-04-13-1.html</link>
    <description><![CDATA[<blockquote>
<p>Очередной самопал :)<br />
Мой текущий wallpaper. Носители скоммуниздил из сети.</p>
</blockquote>
<figure>
<img src="http://images2.imagebam.com/4c/8e/49/259f32818880283.jpg" alt="1600x900" /><figcaption>1600x900</figcaption>
</figure>]]></description>
    <pubDate>Fri, 13 Apr 2018 00:00:00 UT</pubDate>
    <guid>https://chubaduba.github.io//posts/2018-04-13-1.html</guid>
    <dc:creator>ChubaDuba</dc:creator>
</item>
<item>
    <title>Systemd. Запуск задач по расписанию.</title>
    <link>https://chubaduba.github.io//posts/2018-04-08-1.html</link>
    <description><![CDATA[<p>Чтобы systemd запускал нужный нам сервис по таймеру, у сервиса должен быть соответствующий unit-файл (файл конфигурации службы для systemd), он должен иметь расширение <code>.service</code>, а также специальный одноименный unit-файл, но с расширением <code>.timer</code>, описывающий, когда указанный сервис должен быть запущен. Освоив <code>systemd.timer</code>, вполне можно отказаться от использования <code>Cron</code>.</p>
<p>Для примера автоматизируем такую задачу, как обновление списка пакетов из источников, перечисленных в нашем файле <code>sources.list</code>. Ни для кого не секрет, что в Debian для обновления списка пакетов используется следующая команда:</p>
<pre><code># apt-get update
</code></pre>
<p>Первое, что мы сделаем - это завернём данную команду в скрипт:</p>
<hr />
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="ex">apt-get</span> update</a></code></pre></div>
<hr />
<p>Скрипт так и назовём <code>update</code> и сохраним его в <code>/opt</code>. Обязательно нужно сделать скрипт исполняемым:</p>
<pre><code># chmod +x /opt/update
</code></pre>
<p>Вторым шагом нужно создать unit-файл, описывающий наш сервис, и сохранить его в <code>/lib/systemd/system</code>:</p>
<p><code>xmobar_update.service</code>:</p>
<hr />
<pre><code>[Unit]
Description=Update script for xmobar
 
[Service]
ExecStart=/opt/update
</code></pre>
<hr />
<p>где<br />
<code>Description=</code> - произвольное описание;<br />
<code>ExecStart=</code> - директива, которая описывает, что будет запускаться.</p>
<p>Описание должно быть таким, чтобы спустя какое-то время понимать для каких целей вы создавали данный unit-файл. С директивой <code>ExecStart=</code>, думаю, всё понятно. В данном случае запускается ранее созданный нами скрипт.</p>
<p>Наконец, осталось создать unit-файл типа <code>timer</code> и положить туда же с тем же названием, сменив только расширение с <code>.service</code> на <code>.timer</code>:</p>
<p><code>xmobar_update.timer</code>:</p>
<hr />
<pre><code>[Unit]
Description=timer for xmobar update script
 
[Timer]
OnStartupSec=60
 
[Install]
WantedBy=timers.target
</code></pre>
<hr />
<p>Здесь стоит обратить внимание на директиву <code>OnStartupSec=</code>, которая показывает, что запускать сервис надо после первого запуска systemd и, поскольку, ничего иного не указано, с задержкой в 60 секунд. Ничего - не значит ничего. На самом деле systemd просто остальные переменные сам заменит на <code>*</code>, означающую <font color="#91E2E6">всегда</font> - точно так же, как и в Cron’e. Иными словами всегда, после первого запуска systemd, а это происходит каждый раз при запуске компьютера, с задержкой в 60 секунд будет выполняться наш сервис.</p>
<blockquote>
<p>Существуют разные директивы, о которых можно прочитать <a href="https://www.freedesktop.org/software/systemd/man/systemd.timer">в документации к systemd</a>.</p>
</blockquote>
<p>Приведу несколько примеров для директивы <code>OnCalendar=</code>, которая запускает сервис по календарю:</p>
<table>
<colgroup>
<col style="width: 66%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Событие</th>
<th style="text-align: left;">Синтаксис</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Пн-Вт,СБ и ВС в 00:00:00</td>
<td style="text-align: left;"><code>Sat,Thu,Mon-Wed,Sat-Sun</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Все Пн и Вс в 2018-ом в 01:23 и в 02:23</td>
<td style="text-align: left;"><code>Mon,Sun 18-*-* 2,1:23</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">1-ого числа каждого месяца, но только если это среда в 00:00:00</td>
<td style="text-align: left;"><code>Wed *-1</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">То же самое</td>
<td style="text-align: left;"><code>Wed-Wed,Wed *-1</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">По средам 17:48:00</td>
<td style="text-align: left;"><code>Wed, 17:48</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">15-ого октября 2018-ого в 01:02:03, но только, если это Вт, Ср, Чт, Пт, Сб</td>
<td style="text-align: left;"><code>Wed-Sat,Tue 12-10-18 1:2:3</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">7-ого числа каждого месяца в 00:00</td>
<td style="text-align: left;"><code>*-*-7 0:0:0</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Каждый год 15-ого октября в 00:00</td>
<td style="text-align: left;"><code>*-10-15 00:00:00</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Каждой 5-ое марта в 08:05:40</td>
<td style="text-align: left;"><code>03-05 08:05:40</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Ежедневно в 08:05:40</td>
<td style="text-align: left;"><code>08:05:40</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ежедневно в 5:40</td>
<td style="text-align: left;"><code>*-*-* 05:40:00</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">В 2018-ом 3-его мая в 00:00</td>
<td style="text-align: left;"><code>2018-03-05</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ежегодно 3-его мая в 00:00</td>
<td style="text-align: left;"><code>03-05</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Ежечастно в 0 минут</td>
<td style="text-align: left;"><code>hourly</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Ежедневно в 00:00</td>
<td style="text-align: left;"><code>daily</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Ежемесяно 1-ого числа в 00:00</td>
<td style="text-align: left;"><code>monthly</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Еженедельно в понедельник в 00:00</td>
<td style="text-align: left;"><code>weekly</code></td>
</tr>
<tr class="even">
<td style="text-align: left;">Ежегодно 1-ого января в 00:00</td>
<td style="text-align: left;"><code>yearly</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Тоже самое</td>
<td style="text-align: left;"><code>annually</code></td>
</tr>
</tbody>
</table>
<p>Директиву <code>OnCalendar=</code> можно комбинировать с другими типами таймеров, что даёт возможность настроить практически любую вариацию.</p>
<p>Директива <code>WantedBy=timers.target</code> никак не влияет на работу, она нужна для того, чтобы при следующей перезагрузке наш таймер заработал автоматически.</p>
<p>Теперь всё готово для запуска сервиса по таймеру. Обновляем конфигурацию systemd командой:</p>
<pre><code># systemctl daemon-reload
</code></pre>
<p>Ставим таймер в автозагрузку:</p>
<pre><code># systemctl enable xmobar_update.timer
</code></pre>
<p>И наконец, перезагружаемся или включаем таймер командой:</p>
<pre><code># systemctl start xmobar_update.timer
</code></pre>
<p>Всё! <code>xmobar_update.timer</code> будет отслеживать заданное событие и, по наступлению нужного момента, запустит <code>xmobar_update.service</code>.</p>]]></description>
    <pubDate>Sun, 08 Apr 2018 00:00:00 UT</pubDate>
    <guid>https://chubaduba.github.io//posts/2018-04-08-1.html</guid>
    <dc:creator>ChubaDuba</dc:creator>
</item>
<item>
    <title>Xmonad. Чем сделать скриншот?</title>
    <link>https://chubaduba.github.io//posts/2018-04-02-1.html</link>
    <description><![CDATA[<p>Cогласитесь, частенько возникает ситуация, когда необходимо сделать скриншот экрана. Сегодня поговорим как это сделать в xmonad без использования таких монстров как <a href="http://shutter-project.org/">shutter</a>, <a href="https://git.gnome.org/browse/gnome-screenshot">gnome-screenshot</a>, <a href="https://www.kde.org/applications/graphics/ksnapshot">ksnapshot</a> и т.д., которые при установке тянут за собой кучу пакетов.</p>
<p>Существует маленькая консольная утилита, специально разработанная для создания скриншотов. Называется она <a href="http://freshmeat.sourceforge.net/projects/scrot">scrot</a>.</p>
<p>В репозиториях Debian она конечно есть, устанавливается с минимумом зависимостей командой:</p>
<pre><code>$ sudo apt-get install scrot
</code></pre>
<p>Сначала определимся, куда мы будем складывать свои скриншоты. Я создал папку <code>~/Изображения/ScreenShots</code>.</p>
<p>Чтобы постоянно не лезть в консоль и не вводить руками команды, напишем скрипт, который будет создавать скриншот и сохранять его в папке, которую мы заранее подготовили. А запуск скрипта повесим на нужную нам клавишу.</p>
<blockquote>
<p>Ознакомиться со всеми возможными параметрами запуска утилиты можно на <a href="https://www.systutorials.com/docs/linux/man/1-scrot/">этой страничке</a>.</p>
</blockquote>
<p>Вот такой скрипт я использую:</p>
<hr />
<div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="va">name=</span><span class="kw">`</span><span class="fu">date</span> +%x-%X-%N.png<span class="kw">`</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="ex">scrot</span> ~/Изображения/ScreenShots/<span class="va">$name</span> -q 100 -d 10</a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="ex">mpv</span> ~/путь_до_звукового_файла/photosound.mp3</a></code></pre></div>
<hr />
<p>где<br />
<code>name</code> - формат имени создаваемого файла;<br />
<code>q</code> - качество картинки;<br />
<code>d</code>- отсрочка выполнения в секундах.</p>
<p>Иногда бывают ситуации, когда в нужный момент нажать клавишу для создания скриншота не получится. Например, когда открыто какое-нибудь окно, которое блокирует нажатие любых клавиш. Ну а чтобы понимать создался ли у вас скриншот, я добавил звуковое оповещение. Звуковой файл проигрывает консольный плеер <a href="https://mpv.io/">mpv</a>. У вас это может быть любое приложение или утилита, способная издавать звуки. Сам звуковой файл тоже может быть любым. Я для себя выбрал <a href="https://mega.nz/#!5VFhCTQK!uH3bBX4etq8496Zmd4asDHbWbHVksLgTFWsWW0Ydchw">звук затвора фотоаппарата</a>.</p>
<p>Осталось назначить клавишу, по нажатию на которую будет запускаться наш скрипт. Я выбрал клавишу <code>PrtSc</code>. Определяем код клавиши с помошью утилиты <code>xev</code> и редактируем наш файл <code>xmonad.hs</code>:</p>
<hr />
<div class="sourceCode" id="cb3"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb3-1" data-line-number="1">myKeys <span class="fu">=</span> [</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">         , ((<span class="dv">0</span>    , <span class="bn">0xff61</span>), spawn <span class="st">&quot;путь_до_нашего_скрипта&quot;</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">         ]</a></code></pre></div>
<hr />
<blockquote>
<p>Я обычно делаю скриншот целого экрана. Всё равно, практически всегда, открываю созданный скриншот в редакторе <code>Gimp</code> и делаю нужные мне изменения. Если у вас есть необходимость постоянно делать скриншот выделенной области экрана, то работу scrot в таком режиме можно настроить, используя параметр <code>-s</code>.</p>
</blockquote>]]></description>
    <pubDate>Mon, 02 Apr 2018 00:00:00 UT</pubDate>
    <guid>https://chubaduba.github.io//posts/2018-04-02-1.html</guid>
    <dc:creator>ChubaDuba</dc:creator>
</item>
<item>
    <title>Minolta MD Rokkor 50mm f1.2</title>
    <link>https://chubaduba.github.io//posts/2018-03-29-1.html</link>
    <description><![CDATA[<p>Сегодня разговор пойдёт о полтосе от известной фирмы Minolta. Скажу сразу, писать в этом посте о технических характеристиках этого объектива, детально рассматривать резкость на краях и по центру кадра, выкладывать полноразмеры, а также сравнивать его с другими похожими представителями я не буду. Это удел специализированных ресурсов. Я просто расскажу о своём опыте владения этим объективом, а также покажу, что с него получается. Возможно, этот пост поможет кому-то определиться с вопросом покупать или нет это стекло в свою коллекцию.</p>
<blockquote>
<p>Со статьёй на забугорном языке, в которой автор подробно сравнивает Minolta MD Rokkor-X 50mm f1.2 с Minolta MC Rokkor-PG 50mm f1.2 можно ознакомиться <a href="http://www.rokkorfiles.com/Battle%20of%2050s1.htm">здесь</a>.</p>
</blockquote>
<p>Купил я его очень давно, чисто случайно, можно сказать “до кучи” при покупке совсем другого стекла. Покупал в России, через барахолку <code>foto.ru</code> у сравнительно известного продавца Геворга, в состоянии <code>like new</code>. На момент покупки объектив имел родной байонет <code>Minolta  MD</code>.</p>
<figure>
<img src="https://farm5.staticflickr.com/4617/40397478452_0bbd3d1146_o.jpg" alt="Minolta MD Rokkor 50mm f1.2" /><figcaption>Minolta MD Rokkor 50mm f1.2</figcaption>
</figure>
<p><img src="https://farm5.staticflickr.com/4672/40441587771_9ce0cf37f3_o.jpg" /><br />
<img src="https://farm5.staticflickr.com/4714/38631117050_8f45846149_o.jpg" /><br />
<img src="https://farm5.staticflickr.com/4702/25570349217_8c3e5640d1_o.jpg" /><br />
<img src="https://farm5.staticflickr.com/4751/39731103274_96cd0378d1_o.jpg" /><br />
После покупки сразу купил защитный фильтр и резиновую бленду <code>Marumi</code>. Ещё купил вторую переднюю крышку, так как после того как накрутил на объектив защитный фильтр, родная крышка мне совсем перестала нравится.</p>
<p><a href="https://chubaduba.github.io/posts/2018-03-17-1.html">Я уже упоминал</a> о том, что фотоаппарат у меня от Canon. Покупку китайского куска пластмассы под названием <code>md to eos adapter</code>, cтоимостью более тысячи рублей, я сразу не рассматривал. Дело в том, что из-за конструктивных особенностей этих байонетов, адаптер линзованный. Т.е. в нём есть стекло. Я не думаю, что китайцы особо заморачиваются по поводу химического состава этого стекла, да и вообще стекла в принципе, а лепят пластмассу. Согласитесь, моветон иметь пластмассовую прокладку между фотоаппататом и объективом, да ещё за деньги. Мастера, который смог бы переделать объектив под байонет <code>EF</code> я нашёл в Москве. Зовут его <em>Николай Курчавов</em>. На разных форумах, посвящённых мануальной оптике, его можно найти под ником <em>Сундук</em>. Списались по электронке, после договорённости выслал бандеролью объектив. Где-то через 2-3 недели получил обратно уже готовый. Не ради рекламы скажу, что Николай не только мастер, но и человек, увлекающийся фотографией и мануальной оптикой. Сделал всё очень аккуратно и, конечно, со знанием дела. Если решу перепилить ещё что-то, то непременно обращусь к Николаю. Бесконечность присутсвует. На моей тушке с кропом 1.26 стекло не цепляет. На полном кадре, по крайней мере на первопятаке тоже всё без проблем.</p>
<figure>
<img src="https://farm5.staticflickr.com/4704/40441596041_0f92ccf691_o.jpg" alt="Minolta MD Rokkor 50mm f1.2 с байонетом Canon EF" /><figcaption>Minolta MD Rokkor 50mm f1.2 с байонетом Canon EF</figcaption>
</figure>
<figure>
<img src="/images/rokkor.jpg" alt="Canon EOS 1D Mark II + Minolta MD Rokkor 50mm f1.2" /><figcaption>Canon EOS 1D Mark II + Minolta MD Rokkor 50mm f1.2</figcaption>
</figure>
<p>А теперь главное - впечатления о работе стекла. Как любое мануальное стекло, объектив дисциплинирует. С ним не получится тупо нажимать на кнопку спуска и получать желаемый для себя результат. Вся соль этого объектива в наличии диафрагмы 1.2, если она вам не нужна, то на тушку можно накрутить что-то другое и автофокусное. Я бы сказал так, объектив для души и неспешного процесса фотосъёмки. На диафрагме 1.2 зона резкости очень маленькая. По этой причине попасть туда, куда хочется с первого раза проблематично. Давно уже думаю о покупке фокусировочного экрана специально для мануальной оптики, но пока так и не купил.</p>
<figure>
<img src="https://farm5.staticflickr.com/4715/38730030000_434fbf2b53_o.jpg" alt="Одна из первых фоток на этот объектив, f1.2" /><figcaption>Одна из первых фоток на этот объектив, f1.2</figcaption>
</figure>
<p>Сорри за размер. Фотка очень старая, другого размера у себя я не нашёл. RAW файлы хранить у меня нет привычки. Что есть, то есть. Это домашний аквариум, просидел возле него около часа, пока один из меченосцев ИМХО не попал в фокус.</p>
<p>Для фотосъёмки флоры нет вопросов, стекло для этих целей идеальное! Моя жена так его и называет - цветочный объектив.</p>
<figure>
<img src="https://farm1.staticflickr.com/773/32116282280_5eafe3529d_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/325/32116282410_968e1cbf07_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/690/32116283130_a59b409d94_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/665/32342986402_1fdfcd1407_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/469/32116282070_c240151583_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/746/32116281990_3b92ab07cc_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/753/32116281460_a67537cd8d_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/462/32116282140_0707630d6c_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<p>Нравится или не нравится, понятие субъективное. Мне нравится. Имея в своём хозяйстве Canon EF 24-70 f2.8<strong><font color="#DBA3A2">L</font></strong>, который в два раза дороже Rokkor’а, могу точно сказать, что цветочки он так не умеет.</p>
<p>С разноплановыми сюжетами стекло тоже справляется. Опять же интересна полностью открытая дырка:</p>
<figure>
<img src="https://farm1.staticflickr.com/697/32381941451_1b8fdaa112_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/775/31683227093_46be4e7a9a_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/783/40183725675_b419b93ca5_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm5.staticflickr.com/4784/40675551431_7fabb0ec37_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/883/40183188255_5123e3a10c_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/491/32494808985_f3a8e66c9a_o.jpg" alt="Абхазия. Скамейка на озере Рица, f1.2" /><figcaption>Абхазия. Скамейка на озере Рица, f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/759/31683228003_7b16748d8f_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/887/40367591184_99bfd56fb6_o.jpg" alt="Sperry Top-Sider, f1.2" /><figcaption>Sperry Top-Sider, f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/765/32494808795_8f706232e3_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/754/32494808895_5b5b8c7180_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/893/26206107537_f2096aced0_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/891/26206181557_9515ef1fbf_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/375/32494808585_b6cc64df63_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/732/32116281870_64432a3922_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/557/32494782075_367e70fdd8_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/792/41077260301_c1f600104d_o.jpg" alt="f8.0" /><figcaption>f8.0</figcaption>
</figure>
<p>Пейзаж? Ну если вообще карточку с полтоса можно назвать пейзажем, то вполне реально:</p>
<figure>
<img src="https://farm1.staticflickr.com/742/32373165741_476e1ddca8_o.jpg" alt="f8.0" /><figcaption>f8.0</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/534/32494808665_eb386f2d8f_o.jpg" alt="f8.0" /><figcaption>f8.0</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/493/31651434354_ab1a5b065b_o.jpg" alt="f8.0" /><figcaption>f8.0</figcaption>
</figure>
<p>Портрет для нормального полтинника не вопрос, Rokkor в этом плане не исключение. Может, конечно, это мнение субъективное, но на мой взгляд он очень любит съёмку в Ч/Б.</p>
<figure>
<img src="https://farm1.staticflickr.com/878/41075475461_d92795b9c6_o.jpg" alt="f2.0" /><figcaption>f2.0</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/808/41033301892_2fe274a52f_o.jpg" alt="f2.0" /><figcaption>f2.0</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/895/41076542721_1057b297b4_o.jpg" alt="f1.2" /><figcaption>f1.2</figcaption>
</figure>
<figure>
<img src="https://farm1.staticflickr.com/877/39267753050_84550295d0_o.jpg" alt="Amazon Kindle 4, f2.0" /><figcaption>Amazon Kindle 4, f2.0</figcaption>
</figure>
<p>В целом объектив нравится. Однозначно, обладает своим характером. И я и жена фотографируем на него с удовольствием.</p>]]></description>
    <pubDate>Thu, 29 Mar 2018 00:00:00 UT</pubDate>
    <guid>https://chubaduba.github.io//posts/2018-03-29-1.html</guid>
    <dc:creator>ChubaDuba</dc:creator>
</item>
<item>
    <title>Xmonad+xmobar+ALSA.</title>
    <link>https://chubaduba.github.io//posts/2018-03-25-1.html</link>
    <description><![CDATA[<p>Сегодня речь пойдёт о настройке в <code>xmonad</code> горячих клавиш для управления громкостью, а также о выводе в <code>xmobar</code> некоторой информации о звуковых настройках в системе.</p>
<blockquote>
<p>Всё нижеописанное справедливо для <a href="http://www.alsa-project.org/main/index.php/Main_Page">ALSA</a>.</p>
</blockquote>
<p>После того как я отказался от <a href="https://ru.wikipedia.org/wiki/Desktop_environment">DE</a> и стал использовать только <a href="https://ru.wikipedia.org/wiki/X_window_manager">WM</a>, управление громкостью сводилось к открытию <a href="https://en.wikipedia.org/wiki/Alsamixer">alsamixer</a> и последующей регулировке необходимых параметров. Скажем так, стандартный вариант у многих пользователей, которые не используют DE на своём компьютере:</p>
<p><img src="/images/alsamixer.png" /></p>
<p>Всё как бы хорошо, но согласитесь, во время просмотра какого-нибудь очередного сериальчика, для того чтобы сделать чуть потише или громче, нужно было делать все эти манипуляции. Про жену вообще молчу! Первое время фраза: “Сделай чуть погромче”, вводила её в лёгкий ступор. Поэтому я решил всё это дело как-то облагородить. Вот, что у меня получилось…</p>
<p>Первое, что пришло на ум, это назначить в xmonad горячие клавиши для быстрого запуска <code>alsamixer</code>. Сделал:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="fu">...</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">import</span> <span class="dt">XMonad.Util.EZConfig</span>            (additionalKeys)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="fu">...</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4">myConfig <span class="fu">=</span> defaultConfig</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">         { modMask <span class="fu">=</span> mod4Mask</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">         , <span class="fu">...</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">         } <span class="ot">`additionalKeys`</span> myKeys</a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="fu">...</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">myKeys <span class="fu">=</span> [</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">         , ((mod4Mask <span class="fu">.|.</span> controlMask,    xK_a), spawn <span class="st">&quot;urxvt -e alsamixer&quot;</span>)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12">         ]</a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="fu">...</span></a></code></pre></div>
<p>По прошествии некоторого времени, в интернете было найдено решение как в xmonad назначить горячие клавиши для уменьшения (увеличения) громкости и для включения и выключения режима <code>Mute</code>. На моей<br />
клавиатуре есть специальные клавиши для громкости и для Mute. Если на вашей их нет, то назначить действия можно на любые, которые вам нравятся. Редактируем конфиг <code>xmonad</code>, добавляем наши клавиши:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="fu">...</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">myKeys <span class="fu">=</span> [</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4">         , ((<span class="dv">0</span>    , <span class="bn">0x1008ff11</span>), spawn <span class="st">&quot;amixer set Master 2-&quot;</span>)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">         , ((<span class="dv">0</span>    , <span class="bn">0x1008ff13</span>), spawn <span class="st">&quot;amixer set Master 2+&quot;</span>)</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">         , ((<span class="dv">0</span>    , <span class="bn">0x1008ff12</span>), spawn <span class="st">&quot;amixer set Master toggle&quot;</span>)</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">         ]</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="fu">...</span></a></code></pre></div>
<blockquote>
<p>Код нужной клавиши можно определить с помощью утилиты <a href="https://linux.die.net/man/1/xev">xev</a>, набрав в терминале команду <code>xev | grep keycode</code>, и после этого нажать нужную клавишу.</p>
</blockquote>
<p>Стало совсем хорошо! И жена уже не в ступоре :)</p>
<p>Но как говорится, аппетит приходит во время еды. Захотелось реализовать ещё несколько нужных мне фишек. Дело в том, что на данный момент у нас в хозяйстве моноблок <a href="http://static.highspeedbackbone.net/pdf/Lenovo%20C325%20All-In-One%20PC%20Data%20Sheet.pdf">Lenovo C325</a>, у которого есть встроенные динамики. Частенько бывает так, что музыку мы слушаем (а это с женой мы очень любим!) через внешний <a href="http://ldsound.ru/odissej-u-010-stereo-hi-fi/">усилитель</a> и <a href="http://ldsound.ru/75-as-001-kliver/">колонки</a>, подключая моноблок через выход на наушники к усилителю. И не раз было так, что звук идёт и через динамики моноблока, и через внешние колонки. Приходилось открывать <code>alsamixer</code> и выключать звук из динамиков моноблока. Просто, но опять же напряжно, тем более, если дома гости и т.д. Это первое, что хотелось бы сделать. Второе, вывести в <code>xmobar</code> показания уровня громкости.</p>
<p>Реализовать я это решил с помощью скриптов, а результат их работы вывести в xmobar. Первым делом написал вот такой скрипт и обозвал его <code>vol</code>:</p>
<hr />
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">#!/bin/bash</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="va">vol=$(</span><span class="ex">amixer</span> get Master <span class="kw">|</span> <span class="fu">awk</span> -F<span class="st">&#39;[]%[]&#39;</span> <span class="st">&#39;/%/ {if ($7 == &quot;off&quot;) \</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="st">	 { print &quot;MM&quot; } else { print $2 }}&#39;</span> <span class="kw">|</span> <span class="fu">head</span> -n 1<span class="va">)</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="va">COLOR=</span><span class="st">&quot;#DBA3A2&quot;</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="va">volume=</span><span class="st">&quot;[on]&quot;</span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="va">Volume_s=</span><span class="st">&quot;</span><span class="kw">`</span><span class="ex">amixer</span> get Speaker Playback Volume <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;6!d&#39;</span> <span class="kw">|</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10">         <span class="fu">sed</span> -r <span class="st">&#39;s/^[^B]+//&#39;</span> <span class="kw">|</span> <span class="fu">sed</span> -r <span class="st">&#39;s/^[^[]+//&#39;</span><span class="kw">`</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="va">Volume_h=</span><span class="st">&quot;</span><span class="kw">`</span><span class="ex">amixer</span> get Headphone Playback Volume <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;6!d&#39;</span> <span class="kw">|</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13">         <span class="fu">sed</span> -r <span class="st">&#39;s/^[^B]+//&#39;</span> <span class="kw">|</span> <span class="fu">sed</span> -r <span class="st">&#39;s/^[^[]+//&#39;</span><span class="kw">`</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="kw">if [[</span> <span class="va">$Volume_s</span> <span class="ot">==</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span> <span class="kw">&amp;&amp; [[</span> <span class="va">$Volume_h</span> <span class="ot">!=</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16">   <span class="bu">echo</span> <span class="st">&quot;&lt;fc=</span><span class="va">$COLOR</span><span class="st">&gt;(d)&lt;/fc&gt;&lt;fc=#8CD0D3&gt;</span><span class="va">$vol</span><span class="st">%&lt;/fc&gt;&quot;</span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"></a>
<a class="sourceLine" id="cb3-19" data-line-number="19">   <span class="kw">if [[</span> <span class="va">$Volume_s</span> <span class="ot">==</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span> <span class="kw">&amp;&amp; [[</span> <span class="va">$Volume_s</span> <span class="ot">==</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb3-20" data-line-number="20">   <span class="bu">echo</span> <span class="st">&quot;&lt;fc=</span><span class="va">$COLOR</span><span class="st">&gt;(dh)&lt;/fc&gt;&lt;fc=#8CD0D3&gt;</span><span class="va">$vol</span><span class="st">%&lt;/fc&gt;&quot;</span></a>
<a class="sourceLine" id="cb3-21" data-line-number="21">   <span class="kw">fi</span></a>
<a class="sourceLine" id="cb3-22" data-line-number="22"></a>
<a class="sourceLine" id="cb3-23" data-line-number="23">      <span class="kw">if [[</span> <span class="va">$Volume_s</span> <span class="ot">==</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span> <span class="kw">&amp;&amp; [[</span> <span class="va">$Volume_h</span> <span class="ot">!=</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb3-24" data-line-number="24">         <span class="bu">echo</span> <span class="st">&quot;&lt;fc=</span><span class="va">$COLOR</span><span class="st">&gt;(d)&lt;/fc&gt;&lt;fc=#8CD0D3&gt;</span><span class="va">$vol</span><span class="st">%&lt;/fc&gt;&quot;</span></a>
<a class="sourceLine" id="cb3-25" data-line-number="25">      <span class="kw">else</span></a>
<a class="sourceLine" id="cb3-26" data-line-number="26">           <span class="kw">if [[</span> <span class="va">$Volume_h</span> <span class="ot">==</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb3-27" data-line-number="27">              <span class="bu">echo</span> <span class="st">&quot;&lt;fc=</span><span class="va">$COLOR</span><span class="st">&gt;(h)&lt;/fc&gt;&lt;fc=#8CD0D3&gt;</span><span class="va">$vol</span><span class="st">%&lt;/fc&gt;&quot;</span></a>
<a class="sourceLine" id="cb3-28" data-line-number="28">           <span class="kw">else</span></a>
<a class="sourceLine" id="cb3-29" data-line-number="29">              <span class="bu">echo</span> <span class="st">&quot;&lt;fc=#8CD0D3&gt;MM&lt;/fc&gt;&quot;</span></a>
<a class="sourceLine" id="cb3-30" data-line-number="30">           <span class="kw">fi</span></a>
<a class="sourceLine" id="cb3-31" data-line-number="31">      <span class="kw">fi</span></a>
<a class="sourceLine" id="cb3-32" data-line-number="32"></a>
<a class="sourceLine" id="cb3-33" data-line-number="33"><span class="bu">exit</span> 0</a></code></pre></div>
<hr />
<p>Этот скрипт выводит на экран текущий уровень громкости в процентах и показывает какой выходной канал является активным на данный момент. Всего может быть семь вариантов:</p>
<ul>
<li><code>(d)80%</code> - звук идёт через динамики;</li>
<li><code>(h)80%</code> - звук идёт через наушники;</li>
<li><code>(d)MM%</code> - звук идёт через динамики, режим Mute;</li>
<li><code>(h)MM%</code> - звук идёт через наушники; режим Mute;</li>
<li><code>(dh)80%</code> - звук идёт через динамики и наушники;</li>
<li><code>(dh)MM%</code> - звук идёт через динамики и наушники, режим Mute.</li>
</ul>
<blockquote>
<p>С утра, проснувшись с бодуна<br />
Mеня трясёт и глючит…<br />
© Сергей Шнуров</p>
</blockquote>
<p>Согласитесь, что в жизни всякое бывает, и такое тоже. И на этот случай я предусмотрел ещё один вариант:</p>
<ul>
<li><code>MM</code> - динамики и наушники отключены.</li>
</ul>
<p>Выводим результат работы скрипта в xmobar. Вносим изменения в файл конфигурации <code>.xmobarrc</code>:</p>
<pre><code>...
commands = [
           ...
           Run Com &quot;/путь_до_нашего_скрипта/vol&quot; [] &quot;vol&quot; 10,
           ...
           ]
...
, template = &quot; %StdinReader% }{ ... %vol% ...}
</code></pre>
<p>Теперь в xmobar’е есть информация о текущем уровне громкости и и звуковом канале. И мы можем с помощью горячих клавиш уменьшать или увеличивать громкость, либо выключить её совсем, включив режим Mute.</p>
<p>Настала очередь для второй хотелки - переключателе между выходами с динамиков на наушники и наоборот. Для этого я написал второй скрипт, обозвав его <code>alsamixer</code>:</p>
<hr />
<div class="sourceCode" id="cb5"><pre class="sourceCode bash"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co">#! /bin/bash</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="va">volume=</span><span class="st">&quot;[on]&quot;</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="va">Volume_s=</span><span class="st">&quot;</span><span class="kw">`</span><span class="ex">amixer</span> get Speaker Playback Volume <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;6!d&#39;</span> <span class="kw">|</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6">         <span class="fu">sed</span> -r <span class="st">&#39;s/^[^B]+//&#39;</span> <span class="kw">|</span> <span class="fu">sed</span> -r <span class="st">&#39;s/^[^[]+//&#39;</span><span class="kw">`</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">         </a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="va">Volume_h=</span><span class="st">&quot;</span><span class="kw">`</span><span class="ex">amixer</span> get Headphone Playback Volume <span class="kw">|</span> <span class="fu">sed</span> <span class="st">&#39;6!d&#39;</span> <span class="kw">|</span> <span class="kw">\</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9">         <span class="fu">sed</span> -r <span class="st">&#39;s/^[^B]+//&#39;</span> <span class="kw">|</span> <span class="fu">sed</span> -r <span class="st">&#39;s/^[^[]+//&#39;</span><span class="kw">`</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11"><span class="kw">if [[</span> <span class="va">$Volume_s</span> <span class="ot">==</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span> <span class="kw">&amp;&amp; [[</span> <span class="va">$Volume_s</span> <span class="ot">==</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb5-12" data-line-number="12">   <span class="ex">amixer</span> sset Headphone mute</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">   <span class="ex">amixer</span> sset Speaker unmute</a>
<a class="sourceLine" id="cb5-14" data-line-number="14"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb5-15" data-line-number="15"></a>
<a class="sourceLine" id="cb5-16" data-line-number="16"></a>
<a class="sourceLine" id="cb5-17" data-line-number="17"><span class="kw">if [[</span> <span class="va">$Volume_s</span> <span class="ot">==</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span> <span class="kw">&amp;&amp; [[</span> <span class="va">$Volume_h</span> <span class="ot">!=</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb5-18" data-line-number="18">   <span class="ex">amixer</span> sset Headphone unmute</a>
<a class="sourceLine" id="cb5-19" data-line-number="19">   <span class="ex">amixer</span> sset Speaker mute</a>
<a class="sourceLine" id="cb5-20" data-line-number="20"><span class="kw">else</span></a>
<a class="sourceLine" id="cb5-21" data-line-number="21"></a>
<a class="sourceLine" id="cb5-22" data-line-number="22">     <span class="kw">if [[</span> <span class="va">$Volume_h</span> <span class="ot">==</span> *<span class="st">&quot;</span><span class="va">$volume</span><span class="st">&quot;</span>*<span class="kw"> ]]</span>; <span class="kw">then</span></a>
<a class="sourceLine" id="cb5-23" data-line-number="23">        <span class="ex">amixer</span> sset Headphone mute</a>
<a class="sourceLine" id="cb5-24" data-line-number="24">        <span class="ex">amixer</span> sset Speaker unmute</a>
<a class="sourceLine" id="cb5-25" data-line-number="25">     <span class="kw">fi</span></a>
<a class="sourceLine" id="cb5-26" data-line-number="26"><span class="kw">fi</span></a>
<a class="sourceLine" id="cb5-27" data-line-number="27"></a>
<a class="sourceLine" id="cb5-28" data-line-number="28"><span class="bu">exit</span> 0</a></code></pre></div>
<hr />
<p>Тут всё просто. Если включены динамики, то скрипт отрабатывает на их выключение и включение наушников. Также и наоборот, с наушников на динамики. В случае, когда в <code>xmobar</code> будет значение <code>MM</code>, скрипт включит динамики. Осталось определить горячую клавишу, по нажатию которой, будет выполняться скрипт. Редактируем <code>xmonad.hs</code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="fu">...</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">myKeys <span class="fu">=</span> [</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4">         , ((<span class="dv">0</span>   , <span class="bn">0x0</span>), spawn <span class="st">&quot;/путь_до_нашего_скрипта/alsamixer&quot;</span>)</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">         <span class="fu">...</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">         ]</a></code></pre></div>
<p>На этом сегодня всё. Вопрос об управлении громкостью и её визуальном контроле в системе без использования каких-либо дополнительных программ снят.</p>]]></description>
    <pubDate>Sun, 25 Mar 2018 00:00:00 UT</pubDate>
    <guid>https://chubaduba.github.io//posts/2018-03-25-1.html</guid>
    <dc:creator>ChubaDuba</dc:creator>
</item>
<item>
    <title>Мой выбор - Alpine e-mail клиент.</title>
    <link>https://chubaduba.github.io//posts/2018-03-21-1.html</link>
    <description><![CDATA[<p>В своё время, когда в качестве рабочего окружения я использовал <code>Gnome 2</code>, работу почтового клиента выполнял <a href="http://www.claws-mail.org/">Claws Mail</a>. Почтовик, кстати, отличный, всё что от него требовалось, выполнял на 100%. Но после отказа от использования на десктопе рабочих окружений, встал вопрос о его замене на что-то более легковесное, с минимумом зависимостей и консольное. Консольное по той причине, что считаю отправку и получение электронной почты задачей тривиальной, которая должна решаться легко и быстро.</p>
<p>И такое решение было найдено! Консольный почтовый клиент <a href="https://www.washington.edu/alpine/">Alpine</a>, который разработали в <a href="https://www.washington.edu/">Вашингтонском Университете</a>. В репозиториях Debian он есть, устанавливается обычным способом:</p>
<pre><code>$ sudo apt-get install alpine
</code></pre>
<p>После успешной установки, запустить программу можно из терминала командой:</p>
<pre><code>$ alpine
</code></pre>
<figure>
<img src="/images/alpine.png" alt="Alpine. Главное окно." /><figcaption>Alpine. Главное окно.</figcaption>
</figure>
<p>Стоит отметить, что программа не имеет русского интерфейса, но это не мешает комфортно ей пользоваться. Я не буду в этом посте подробно описывать настройки и работу Alpine. Заинтересовавшимся найти эту информацию в интернете не составит труда. А вот разместить ссылку на видеоролик, в котором показано как настроить Alpine на работу с почтовым ящиком <code>Gmail</code>, думаю будет не лишним, пусть на забугорном языке, но всё очень подробно показано:</p>
<iframe width="100%" height="240" src="https://www.youtube.com/embed/SNYLDDx4Mro" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>
</iframe>]]></description>
    <pubDate>Wed, 21 Mar 2018 00:00:00 UT</pubDate>
    <guid>https://chubaduba.github.io//posts/2018-03-21-1.html</guid>
    <dc:creator>ChubaDuba</dc:creator>
</item>

    </channel>
</rss>
